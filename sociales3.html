<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ciudadan√≠a Activa - NeuroKids</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #FEF0F0 0%, #EDA2A1 30%, #889F92 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .title {
            font-size: 2.5rem;
            color: #E15034;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .subtitle {
            color: #889F92;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .stat {
            background: linear-gradient(135deg, #E15034, rgba(255, 255, 255, 0.3));
            padding: 15px 30px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
            text-align: center;
            min-width: 120px;
        }

        .stat-value {
            font-size: 2rem;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .back-btn {
            background: rgba(136, 159, 146, 0.2);
            color: #889F92;
            border: 2px solid #889F92;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
            font-family: 'Poppins', sans-serif;
        }

        .back-btn:hover {
            background: #889F92;
            color: white;
        }

        .module-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .module-card {
            background: linear-gradient(135deg, #E15034, #E77B66);
            padding: 30px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            text-align: center;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .module-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .module-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .module-card.active {
            border-color: white;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
        }

        .module-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .module-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .module-desc {
            font-size: 0.95rem;
            opacity: 0.95;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        .scenario-container {
            background: linear-gradient(135deg, #FEF0F0, #EDA2A1);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 30px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .scenario-badge {
            display: inline-block;
            background: rgba(225, 80, 52, 0.2);
            color: #E15034;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .scenario-title {
            font-size: 1.8rem;
            color: #E15034;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.3;
        }

        .scenario-story {
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #E15034;
        }

        .story-text {
            color: #889F92;
            line-height: 1.7;
            font-size: 1.05rem;
            margin-bottom: 15px;
        }

        .story-illustration {
            text-align: center;
            font-size: 5rem;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .question-prompt {
            background: rgba(238, 154, 91, 0.15);
            padding: 20px;
            border-radius: 12px;
            color: #E15034;
            font-weight: 600;
            font-size: 1.15rem;
            margin-bottom: 25px;
            border: 2px dashed #EE9A5B;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }

        .option-btn {
            background: white;
            border: 3px solid #E15034;
            padding: 25px;
            border-radius: 18px;
            font-size: 1.05rem;
            font-weight: 600;
            color: #E15034;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(225, 80, 52, 0.1), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            background: linear-gradient(135deg, #E15034, #E77B66);
            color: white;
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border-color: #4CAF50;
            color: white;
            animation: correctPulse 0.6s ease;
        }

        .option-btn.incorrect {
            background: linear-gradient(135deg, #f44336, #ef5350);
            border-color: #f44336;
            color: white;
            animation: shake 0.5s ease;
        }

        .option-btn.neutral {
            background: linear-gradient(135deg, #FF9800, #FFB74D);
            border-color: #FF9800;
            color: white;
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .feedback {
            margin-top: 25px;
            padding: 30px;
            border-radius: 18px;
            animation: slideIn 0.5s ease;
        }

        .feedback.excellent {
            background: rgba(76, 175, 80, 0.15);
            border-left: 5px solid #4CAF50;
        }

        .feedback.good {
            background: rgba(255, 152, 0, 0.15);
            border-left: 5px solid #FF9800;
        }

        .feedback.poor {
            background: rgba(244, 67, 54, 0.15);
            border-left: 5px solid #f44336;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .feedback.excellent .feedback-title {
            color: #2e7d32;
        }

        .feedback.good .feedback-title {
            color: #F57C00;
        }

        .feedback.poor .feedback-title {
            color: #c62828;
        }

        .feedback-text {
            color: #889F92;
            line-height: 1.7;
            font-size: 1.05rem;
            margin-bottom: 15px;
        }

        .civic-lesson {
            background: rgba(136, 159, 146, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
        }

        .civic-lesson-title {
            font-weight: 700;
            color: #889F92;
            margin-bottom: 10px;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .civic-lesson-text {
            color: #889F92;
            line-height: 1.6;
            font-size: 0.98rem;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #FEF0F0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #E15034, #E77B66, #EE9A5B);
            transition: width 0.5s ease;
            box-shadow: 0 2px 8px rgba(225, 80, 52, 0.3);
        }

        .completion-screen {
            text-align: center;
            padding: 50px 20px;
        }

        .trophy {
            font-size: 7rem;
            margin-bottom: 25px;
            animation: trophyBounce 2s ease infinite;
        }

        @keyframes trophyBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(-5deg); }
            75% { transform: translateY(-20px) rotate(5deg); }
        }

        .completion-title {
            color: #E15034;
            font-size: 2.8rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-display {
            font-size: 3.5rem;
            color: #E15034;
            font-weight: 700;
            margin: 25px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .citizenship-badge {
            display: inline-block;
            background: linear-gradient(135deg, #E15034, #E77B66);
            color: white;
            padding: 18px 35px;
            border-radius: 30px;
            font-weight: 700;
            margin: 15px 10px;
            font-size: 1.15rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .rights-learned {
            background: rgba(136, 159, 146, 0.15);
            padding: 25px;
            border-radius: 18px;
            margin: 30px auto;
            max-width: 600px;
        }

        .rights-title {
            font-size: 1.3rem;
            color: #889F92;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .rights-list {
            list-style: none;
            padding: 0;
        }

        .rights-list li {
            color: #889F92;
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 10px;
            font-weight: 500;
        }

        .rights-list li::before {
            content: '‚úì ';
            color: #4CAF50;
            font-weight: 700;
            margin-right: 8px;
        }

        .restart-btn {
            background: linear-gradient(135deg, #889F92, #E77B66);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px;
            font-family: 'Poppins', sans-serif;
        }

        .restart-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 1.8rem;
            }

            .game-container {
                padding: 25px;
            }

            .scenario-title {
                font-size: 1.4rem;
            }

            .module-selector {
                grid-template-columns: 1fr;
            }

            .story-illustration {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="actividadesgrados.html" class="back-btn">‚Üê Volver a Actividades</a>
        
        <div class="header">
            <h1 class="title">üèõÔ∏è Ciudadan√≠a Activa</h1>
            <p class="subtitle">Aprende sobre derechos, deberes y tu rol como ciudadano responsable en la sociedad</p>
            <div class="stats-bar">
                <div class="stat">
                    <span class="stat-value" id="currentScore">0</span>
                    <span class="stat-label">Puntos C√≠vicos</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="goodDecisions">0</span>
                    <span class="stat-label">Decisiones Acertadas</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="questionNum">0/6</span>
                    <span class="stat-label">Progreso</span>
                </div>
            </div>
        </div>

        <div class="game-container" id="gameContainer">
            <div id="moduleSelector">
                <h2 style="color: #E15034; margin-bottom: 30px; text-align: center; font-size: 2rem;">
                    üìö Explora los Pilares de la Ciudadan√≠a
                </h2>
                <div class="module-selector">
                    <div class="module-card" onclick="startGame('derechos')">
                        <div class="module-icon">‚öñÔ∏è</div>
                        <div class="module-title">Derechos Fundamentales</div>
                        <div class="module-desc">Conoce tus derechos como ciudadano y c√≥mo ejercerlos responsablemente</div>
                    </div>
                    <div class="module-card" onclick="startGame('deberes')">
                        <div class="module-icon">ü§ù</div>
                        <div class="module-title">Deberes Ciudadanos</div>
                        <div class="module-desc">Comprende tus responsabilidades hacia la sociedad y la comunidad</div>
                    </div>
                    <div class="module-card" onclick="startGame('gobierno')">
                        <div class="module-icon">üèõÔ∏è</div>
                        <div class="module-title">Gobierno y Democracia</div>
                        <div class="module-desc">Entiende c√≥mo funciona el gobierno y la importancia de la participaci√≥n</div>
                    </div>
                </div>
            </div>

            <div id="gameArea" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="scenario-container" id="scenarioContainer"></div>
            </div>

            <div id="completionScreen" style="display: none;" class="completion-screen">
                <div class="trophy">üèÜ</div>
                <h2 class="completion-title">¬°Ciudadano Ejemplar!</h2>
                <div class="score-display" id="finalScore">0/6</div>
                <div id="citizenshipBadges"></div>
                <div class="rights-learned">
                    <div class="rights-title">üìñ Aprendizajes Clave</div>
                    <ul class="rights-list" id="learningsList"></ul>
                </div>
                <p style="font-size: 1.2rem; color: #889F92; margin: 25px 0;">
                    Has completado tu formaci√≥n c√≠vica con √©xito
                </p>
                <div id="performanceMessage" style="font-size: 1.2rem; color: #E15034; margin-bottom: 30px; font-weight: 600;"></div>
                <button class="restart-btn" onclick="location.reload()">üîÑ Nuevo Desaf√≠o</button>
                <a href="actividadesgrados.html" class="restart-btn" style="text-decoration: none; display: inline-block;">üè† Volver al Men√∫</a>
            </div>
        </div>
    </div>

    <script>
        const civicData = {
            derechos: [
                {
                    title: "Libertad de Expresi√≥n",
                    story: "En tu escuela, algunos estudiantes quieren organizar una protesta pac√≠fica porque no est√°n de acuerdo con una nueva regla sobre el uso de celulares. El director dice que no pueden hacerlo.",
                    icon: "üì¢",
                    question: "¬øQu√© deber√≠as hacer para ejercer tu derecho a la expresi√≥n de manera responsable?",
                    options: [
                        "Organizar la protesta de todos modos, ignorando al director",
                        "Solicitar una reuni√≥n con el director para expresar las inquietudes de manera respetuosa y proponer alternativas",
                        "Hacer publicaciones negativas en redes sociales sobre la escuela",
                        "Abandonar la idea completamente sin hacer nada"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! Ejercer el derecho a la expresi√≥n incluye hacerlo de manera respetuosa y constructiva. El di√°logo es fundamental en una democracia.",
                        good: "Recordemos que los derechos deben ejercerse con responsabilidad y respeto hacia los dem√°s.",
                        poor: "Es importante entender que nuestros derechos deben ejercerse dentro del marco del respeto y la legalidad."
                    },
                    lesson: "La libertad de expresi√≥n es un derecho fundamental, pero debe ejercerse con responsabilidad, respetando a los dem√°s y buscando el di√°logo constructivo."
                },
                {
                    title: "Derecho a la Educaci√≥n",
                    story: "Tu compa√±era Mar√≠a tiene dificultades de aprendizaje y algunos profesores sugieren que deber√≠a ir a una escuela diferente. Sus padres est√°n preocupados y no saben qu√© hacer.",
                    icon: "üìö",
                    question: "¬øCu√°l es la mejor manera de apoyar el derecho a la educaci√≥n inclusiva de Mar√≠a?",
                    options: [
                        "Aceptar que Mar√≠a debe cambiar de escuela porque es m√°s f√°cil",
                        "Informar a los padres sobre el derecho a la educaci√≥n inclusiva y sugerir que soliciten adaptaciones curriculares",
                        "Ignorar la situaci√≥n porque no te afecta directamente",
                        "Presionar a Mar√≠a para que se esfuerce m√°s sin apoyo adicional"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Correcto! Todos tienen derecho a una educaci√≥n de calidad. La inclusi√≥n y las adaptaciones ayudan a garantizar este derecho.",
                        good: "Recuerda que la educaci√≥n es un derecho universal y debe ser accesible para todos, con las adaptaciones necesarias.",
                        poor: "La educaci√≥n inclusiva es un derecho fundamental que debe garantizarse para todas las personas."
                    },
                    lesson: "El derecho a la educaci√≥n incluye la educaci√≥n inclusiva. Todas las personas tienen derecho a aprender en igualdad de condiciones, con las adaptaciones que necesiten."
                },
                {
                    title: "Derecho a la Privacidad",
                    story: "Tu mejor amigo te comparte fotos personales de su familia. Al d√≠a siguiente, otro compa√±ero te pide que se las env√≠es porque dice que son 'divertidas'.",
                    icon: "üîí",
                    question: "¬øC√≥mo respetas el derecho a la privacidad de tu amigo?",
                    options: [
                        "Enviar las fotos solo a ese compa√±ero y pedirle que no las comparta",
                        "Rechazar la solicitud y explicar que esas fotos son privadas y no te corresponde compartirlas",
                        "Compartirlas solo en un grupo privado de amigos cercanos",
                        "Preguntarle a tu amigo pero presionarlo hasta que diga que s√≠"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! Respetar la privacidad significa proteger la informaci√≥n personal que otros comparten contigo. La confianza es fundamental.",
                        good: "La privacidad es un derecho importante que debemos respetar en todo momento.",
                        poor: "Compartir informaci√≥n privada sin consentimiento viola el derecho a la privacidad de las personas."
                    },
                    lesson: "El derecho a la privacidad protege nuestra informaci√≥n personal. Debemos respetar la privacidad de los dem√°s como queremos que respeten la nuestra."
                },
                {
                    title: "Derecho a la Igualdad",
                    story: "En un proyecto de grupo, notas que siempre se elige a los mismos estudiantes como l√≠deres porque 'son m√°s inteligentes'. Una compa√±era muy capaz nunca ha tenido la oportunidad.",
                    icon: "‚öñÔ∏è",
                    question: "¬øQu√© acci√≥n promueve mejor el derecho a la igualdad de oportunidades?",
                    options: [
                        "Mantener el sistema actual porque funciona bien",
                        "Proponer un sistema rotativo donde todos tengan la oportunidad de liderar y aprender",
                        "Sugerir que solo los mejores estudiantes deben ser l√≠deres",
                        "Formar grupos solo con personas similares"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! La igualdad de oportunidades significa dar a todos la posibilidad de desarrollar sus capacidades y contribuir.",
                        good: "Todos merecen las mismas oportunidades de participar y desarrollarse.",
                        poor: "La igualdad implica dar oportunidades justas a todas las personas, sin discriminaci√≥n."
                    },
                    lesson: "El derecho a la igualdad garantiza que todas las personas tengan las mismas oportunidades sin discriminaci√≥n por ninguna raz√≥n."
                },
                {
                    title: "Derecho a la Participaci√≥n",
                    story: "El consejo estudiantil va a tomar decisiones importantes sobre actividades escolares, pero solo invitan a los estudiantes de √∫ltimos grados.",
                    icon: "üó≥Ô∏è",
                    question: "¬øC√≥mo se puede garantizar el derecho a la participaci√≥n de todos?",
                    options: [
                        "Aceptar que solo los mayores pueden participar porque tienen m√°s experiencia",
                        "Proponer que haya representantes de todos los grados en las decisiones que afectan a toda la escuela",
                        "Crear un consejo paralelo solo para los estudiantes menores",
                        "Dejar que los profesores decidan por todos los estudiantes"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Correcto! La participaci√≥n democr√°tica requiere que todos los afectados por las decisiones tengan voz en ellas.",
                        good: "La participaci√≥n es m√°s justa cuando incluye a todos los que se ven afectados por las decisiones.",
                        poor: "El derecho a la participaci√≥n significa que todos deben tener voz en las decisiones que les afectan."
                    },
                    lesson: "El derecho a la participaci√≥n significa que todos tienen derecho a ser escuchados y tomar parte en las decisiones que les afectan."
                },
                {
                    title: "Derecho a un Ambiente Sano",
                    story: "Notas que en tu barrio hay mucha basura acumulada y nadie hace nada al respecto. El aire huele mal y hay insectos.",
                    icon: "üå±",
                    question: "¬øCu√°l es la mejor forma de ejercer tu derecho a un ambiente sano?",
                    options: [
                        "Mudarte a otro barrio donde est√© m√°s limpio",
                        "Organizar una jornada de limpieza comunitaria y presentar una petici√≥n a las autoridades locales",
                        "Quejarte en redes sociales sin tomar acci√≥n",
                        "Esperar que alguien m√°s resuelva el problema"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! Ejercer tus derechos incluye tomar acci√≥n ciudadana y trabajar con tu comunidad y autoridades.",
                        good: "El derecho a un ambiente sano requiere participaci√≥n activa de los ciudadanos.",
                        poor: "Los derechos ambientales se protegen con acci√≥n ciudadana responsable y organizada."
                    },
                    lesson: "El derecho a un ambiente sano implica tanto exigirlo como contribuir activamente a su cuidado y mejora."
                }
            ],
            deberes: [
                {
                    title: "Deber de Respetar las Normas",
                    story: "Vas tarde a la escuela y ves que el sem√°foro est√° en rojo. No hay carros cerca y podr√≠as cruzar r√°pidamente.",
                    icon: "üö¶",
                    question: "¬øCu√°l es la decisi√≥n que refleja mejor tu deber ciudadano?",
                    options: [
                        "Cruzar r√°pido porque no hay peligro visible",
                        "Esperar a que el sem√°foro cambie a verde, demostrando respeto por las normas",
                        "Cruzar solo si nadie te est√° mirando",
                        "Cruzar pero mirar bien antes para asegurarte"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! Respetar las normas, aunque parezca que nadie nos ve, es fundamental para la convivencia. Das buen ejemplo a otros.",
                        good: "Las normas est√°n para protegernos a todos, incluso cuando parece que no hay peligro.",
                        poor: "Respetar las normas es un deber ciudadano fundamental, sin importar si hay consecuencias inmediatas."
                    },
                    lesson: "Respetar las normas es un deber c√≠vico que demuestra responsabilidad y contribuye al orden social, incluso cuando nadie nos observa."
                },
                {
                    title: "Deber de Contribuir al Bien Com√∫n",
                    story: "Tu clase organiz√≥ una colecta para ayudar a familias necesitadas. Tienes algo de dinero ahorrado que quer√≠as gastar en un videojuego nuevo.",
                    icon: "ü§≤",
                    question: "¬øQu√© decisi√≥n refleja mejor el deber de solidaridad?",
                    options: [
                        "Comprar el videojuego porque es tu dinero y trabajaste por √©l",
                        "Donar una parte de tus ahorros y posponer la compra del videojuego",
                        "No donar pero decir que lo hiciste",
                        "Pedirle a otros que donen m√°s en tu lugar"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! La solidaridad implica sacrificar algo personal por el bienestar de otros. Tu ejemplo inspira a la comunidad.",
                        good: "Contribuir al bien com√∫n a veces requiere hacer sacrificios personales.",
                        poor: "El deber de solidaridad implica contribuir activamente al bienestar de nuestra comunidad."
                    },
                    lesson: "Tenemos el deber de contribuir al bien com√∫n y ser solidarios, especialmente con quienes m√°s lo necesitan."
                },
                {
                    title: "Deber de Participar Democr√°ticamente",
                    story: "En tu escuela hay elecciones para el representante estudiantil. No conoces bien a los candidatos y te da pereza investigar sus propuestas.",
                    icon: "üó≥Ô∏è",
                    question: "¬øCu√°l es tu deber como ciudadano en formaci√≥n?",
                    options: [
                        "No votar porque no te interesa",
                        "Votar por el m√°s popular sin investigar",
                        "Investigar las propuestas de cada candidato y votar informadamente",
                        "Dejar que otros decidan por ti"
                    ],
                    correct: 2,
                    feedback: {
                        excellent: "¬°Correcto! El voto informado es fundamental en la democracia. Tu participaci√≥n consciente fortalece el sistema democr√°tico.",
                        good: "Participar en la democracia requiere informarnos y tomar decisiones responsables.",
                        poor: "Tenemos el deber de participar activa e informadamente en los procesos democr√°ticos."
                    },
                    lesson: "Participar en la democracia es un deber ciudadano que requiere informaci√≥n, reflexi√≥n y compromiso con el bien com√∫n."
                },
                {
                    title: "Deber de Proteger el Medio Ambiente",
                    story: "Terminas de comer un snack en el parque y no ves un basurero cerca. Hay un peque√±o arbusto donde podr√≠as esconder el envoltorio.",
                    icon: "‚ôªÔ∏è",
                    question: "¬øCu√°l es tu deber ambiental en esta situaci√≥n?",
                    options: [
                        "Esconder el envoltorio en el arbusto para que no se vea",
                        "Guardar la basura en tu bolsillo o mochila hasta encontrar un basurero apropiado",
                        "Dejarlo en el suelo porque eventualmente alguien lo recoger√°",
                        "Tirarlo solo si nadie te est√° mirando"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! Cuidar el medio ambiente es responsabilidad de todos. Tu acci√≥n, aunque peque√±a, hace la diferencia.",
                        good: "Cada acci√≥n cuenta cuando se trata de cuidar nuestro planeta.",
                        poor: "Tenemos el deber de proteger el medio ambiente con nuestras acciones diarias."
                    },
                    lesson: "Proteger el medio ambiente es un deber de todos. Nuestras acciones individuales, por peque√±as que sean, impactan el planeta."
                },
                {
                    title: "Deber de Honestidad",
                    story: "En el supermercado, el cajero te da cambio de m√°s por error. Son $10 adicionales y √©l no se dio cuenta.",
                    icon: "üí∞",
                    question: "¬øCu√°l es tu deber como ciudadano honesto?",
                    options: [
                        "Quedarte con el dinero porque fue error del cajero",
                        "Devolver el dinero extra inmediatamente e informar del error",
                        "Guardarlo y regresar m√°s tarde si te sientes culpable",
                        "Qued√°rtelo pero donar algo a caridad para compensar"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! La honestidad es fundamental para la confianza social. Tu integridad construye una sociedad mejor.",
                        good: "Ser honestos, incluso cuando nadie nos ve, es esencial para la confianza en la sociedad.",
                        poor: "La honestidad es un deber c√≠vico fundamental que debe guiar todas nuestras acciones."
                    },
                    lesson: "La honestidad es un deber ciudadano esencial. Actuar con integridad, incluso en situaciones peque√±as, fortalece el tejido social."
                },
                {
                    title: "Deber de Respetar la Diversidad",
                    story: "Un nuevo estudiante llega a tu clase. Viene de otro pa√≠s, habla diferente y tiene costumbres distintas. Algunos compa√±eros se burlan de √©l.",
                    icon: "üåç",
                    question: "¬øCu√°l es tu deber frente a la diversidad?",
                    options: [
                        "Unirte a las burlas para no quedar fuera del grupo",
                        "Defender al nuevo estudiante, darle la bienvenida y detener las burlas",
                        "No hacer nada para no involucrarte",
                        "Ser amable con √©l solo cuando nadie te vea"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! Respetar y celebrar la diversidad es un deber fundamental. Tu valent√≠a crea un ambiente inclusivo.",
                        good: "Defender y respetar la diversidad es responsabilidad de todos los ciudadanos.",
                        poor: "Tenemos el deber de respetar y defender la diversidad, no de permitir la discriminaci√≥n."
                    },
                    lesson: "Respetar la diversidad cultural, √©tnica y social es un deber ciudadano que enriquece nuestra sociedad y promueve la convivencia pac√≠fica."
                }
            ],
            gobierno: [
                {
                    title: "Divisi√≥n de Poderes",
                    story: "El alcalde de tu ciudad quiere construir un parque en un terreno protegido. El concejo municipal dice que es ilegal, pero el alcalde insiste en hacerlo de todos modos.",
                    icon: "‚öñÔ∏è",
                    question: "¬øQu√© principio democr√°tico est√° en juego aqu√≠?",
                    options: [
                        "El alcalde puede hacer lo que quiera porque gan√≥ las elecciones",
                        "La divisi√≥n de poderes: el concejo tiene el deber de controlar que el alcalde respete las leyes",
                        "Solo el pueblo puede decidir mediante una votaci√≥n",
                        "El alcalde debe consultar con el presidente"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Correcto! La divisi√≥n de poderes garantiza que ninguna autoridad tenga poder absoluto. Los controles y balances protegen la democracia.",
                        good: "La divisi√≥n de poderes es esencial para evitar abusos de autoridad.",
                        poor: "En una democracia, los diferentes poderes se controlan mutuamente para proteger a los ciudadanos."
                    },
                    lesson: "La divisi√≥n de poderes (ejecutivo, legislativo y judicial) es fundamental en la democracia para evitar abusos de poder y proteger los derechos ciudadanos."
                },
                {
                    title: "Participaci√≥n Ciudadana",
                    story: "El gobierno planea cerrar un hospital del barrio para construir oficinas. Los vecinos est√°n preocupados pero no saben c√≥mo expresar su opini√≥n.",
                    icon: "üè•",
                    question: "¬øCu√°l es el mecanismo democr√°tico m√°s efectivo?",
                    options: [
                        "Aceptar la decisi√≥n porque el gobierno sabe qu√© es mejor",
                        "Organizar una petici√≥n ciudadana y solicitar una audiencia p√∫blica para expresar sus preocupaciones",
                        "Protestar violentamente para llamar la atenci√≥n",
                        "Mudarse a otro barrio"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! Los mecanismos de participaci√≥n ciudadana permiten influir en las decisiones del gobierno de manera pac√≠fica y constructiva.",
                        good: "La participaci√≥n ciudadana organizada es clave para influir en las pol√≠ticas p√∫blicas.",
                        poor: "En democracia, los ciudadanos tienen herramientas legales para participar en las decisiones que les afectan."
                    },
                    lesson: "La democracia no termina con el voto. Los ciudadanos tienen derecho y deber de participar activamente mediante peticiones, audiencias p√∫blicas y otros mecanismos legales."
                },
                {
                    title: "Transparencia Gubernamental",
                    story: "Un funcionario p√∫blico es cuestionado por usar dinero p√∫blico para viajes personales. Sus amigos dicen que es un 'buen tipo' y que no deber√≠amos investigarlo.",
                    icon: "üîç",
                    question: "¬øQu√© principio democr√°tico debe aplicarse?",
                    options: [
                        "Proteger al funcionario porque hace un buen trabajo en otras √°reas",
                        "Exigir transparencia e investigaci√≥n: todos los funcionarios deben rendir cuentas del uso de recursos p√∫blicos",
                        "Ignorar el tema si es poco dinero",
                        "Dejarlo en manos de sus amigos pol√≠ticos"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! La transparencia y rendici√≥n de cuentas son pilares de la democracia. Todos los funcionarios deben responder por sus actos.",
                        good: "La rendici√≥n de cuentas es esencial para prevenir la corrupci√≥n y proteger los recursos p√∫blicos.",
                        poor: "En democracia, todos los funcionarios p√∫blicos deben rendir cuentas de sus acciones, sin excepciones."
                    },
                    lesson: "La transparencia y rendici√≥n de cuentas son fundamentales en la democracia. Los funcionarios p√∫blicos deben responder por el uso de recursos p√∫blicos ante los ciudadanos."
                },
                {
                    title: "Estado de Derecho",
                    story: "Un pol√≠tico muy popular es acusado de un delito. Sus seguidores dicen que la justicia lo persigue por razones pol√≠ticas y que deber√≠a ser liberado.",
                    icon: "‚öñÔ∏è",
                    question: "¬øQu√© principio del Estado de Derecho debe prevalecer?",
                    options: [
                        "Liberar al pol√≠tico porque es popular",
                        "Permitir que la justicia act√∫e independientemente: todos son iguales ante la ley, sin importar su posici√≥n",
                        "Decidir mediante votaci√≥n popular si es culpable",
                        "Dejarlo libre si promete no volver a hacerlo"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Correcto! El Estado de Derecho significa que nadie est√° por encima de la ley. La justicia debe ser independiente e imparcial.",
                        good: "La igualdad ante la ley es un principio fundamental que protege la democracia.",
                        poor: "En un Estado de Derecho, todos son iguales ante la ley, independientemente de su posici√≥n o popularidad."
                    },
                    lesson: "El Estado de Derecho significa que todos, incluyendo los gobernantes, est√°n sujetos a la ley. La justicia debe ser independiente y aplicarse por igual."
                },
                {
                    title: "Libertad de Prensa",
                    story: "Un peri√≥dico publica noticias cr√≠ticas sobre el gobierno. El presidente quiere cerrar el peri√≥dico porque dice que las noticias son falsas.",
                    icon: "üì∞",
                    question: "¬øQu√© principio democr√°tico protege la libertad de prensa?",
                    options: [
                        "El presidente puede cerrar medios que lo critiquen",
                        "La libertad de prensa es fundamental; si hay informaci√≥n falsa, existen mecanismos legales sin cerrar el medio",
                        "Solo medios que apoyan al gobierno deber√≠an existir",
                        "Cerrar el peri√≥dico si muchas personas est√°n de acuerdo"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Perfecto! La libertad de prensa es esencial en democracia. Los medios deben poder fiscalizar al gobierno sin temor a represalias.",
                        good: "Una prensa libre es vital para la transparencia y rendici√≥n de cuentas del gobierno.",
                        poor: "La libertad de prensa protege el derecho de los ciudadanos a estar informados y cuestionar al poder."
                    },
                    lesson: "La libertad de prensa es un pilar de la democracia. Los medios independientes fiscalizan al poder y mantienen informados a los ciudadanos."
                },
                {
                    title: "Derechos de las Minor√≠as",
                    story: "En una votaci√≥n escolar, el 80% vota por eliminar el programa de m√∫sica porque prefieren m√°s deportes. El 20% que ama la m√∫sica se siente ignorado.",
                    icon: "üéµ",
                    question: "¬øQu√© principio democr√°tico debe considerarse?",
                    options: [
                        "La mayor√≠a siempre gana, las minor√≠as deben aceptar",
                        "Buscar soluciones que respeten los intereses de la mayor√≠a pero tambi√©n protejan los derechos de las minor√≠as",
                        "Hacer otra votaci√≥n hasta que gane lo que queremos",
                        "Dividir la escuela en dos grupos separados"
                    ],
                    correct: 1,
                    feedback: {
                        excellent: "¬°Excelente! La democracia no es solo el gobierno de la mayor√≠a, tambi√©n protege los derechos de las minor√≠as. El equilibrio es clave.",
                        good: "Una democracia saludable protege tanto los intereses de la mayor√≠a como los derechos de las minor√≠as.",
                        poor: "La democracia incluye proteger los derechos de las minor√≠as, no solo seguir la voluntad de la mayor√≠a."
                    },
                    lesson: "La democracia verdadera protege los derechos de las minor√≠as. La regla de la mayor√≠a no debe eliminar los derechos fundamentales de los grupos minoritarios."
                }
            ]
        };

        const moduleNames = {
            derechos: "Derechos Fundamentales",
            deberes: "Deberes Ciudadanos",
            gobierno: "Gobierno y Democracia"
        };

        const moduleIcons = {
            derechos: "‚öñÔ∏è",
            deberes: "ü§ù",
            gobierno: "üèõÔ∏è"
        };

        let currentModule = '';
        let currentQuestion = 0;
        let score = 0;
        let goodDecisions = 0;
        let scenarios = [];
        let learnings = [];

        function startGame(module) {
            currentModule = module;
            scenarios = civicData[module];
            currentQuestion = 0;
            score = 0;
            goodDecisions = 0;
            learnings = [];

            document.getElementById('moduleSelector').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            
            updateStats();
            showScenario();
        }

        function showScenario() {
            const scenario = scenarios[currentQuestion];
            const container = document.getElementById('scenarioContainer');
            
            let html = `
                <div class="scenario-badge">${moduleNames[currentModule]} ${moduleIcons[currentModule]}</div>
                <div class="scenario-title">${scenario.title}</div>
                <div class="scenario-story">
                    <div class="story-illustration">${scenario.icon}</div>
                    <div class="story-text">${scenario.story}</div>
                </div>
                <div class="question-prompt">
                    üí≠ ${scenario.question}
                </div>
                <div class="options-container">
            `;
            
            scenario.options.forEach((option, index) => {
                html += `<button class="option-btn" onclick="checkAnswer(${index})">${option}</button>`;
            });
            
            html += '</div><div id="feedback"></div>';
            
            container.innerHTML = html;
            updateProgress();
        }

        function checkAnswer(selected) {
            const scenario = scenarios[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            const feedback = document.getElementById('feedback');
            
            buttons.forEach(btn => btn.disabled = true);
            
            let feedbackClass = '';
            let feedbackContent = '';
            
            if (selected === scenario.correct) {
                buttons[selected].classList.add('correct');
                score += 20;
                goodDecisions++;
                feedbackClass = 'excellent';
                feedbackContent = scenario.feedback.excellent;
            } else if (Math.abs(selected - scenario.correct) === 1) {
                buttons[selected].classList.add('neutral');
                buttons[scenario.correct].classList.add('correct');
                score += 10;
                feedbackClass = 'good';
                feedbackContent = scenario.feedback.good;
            } else {
                buttons[selected].classList.add('incorrect');
                buttons[scenario.correct].classList.add('correct');
                score += 5;
                feedbackClass = 'poor';
                feedbackContent = scenario.feedback.poor;
            }
            
            learnings.push(scenario.lesson);
            
            feedback.innerHTML = `
                <div class="feedback ${feedbackClass}">
                    <div class="feedback-title">${selected === scenario.correct ? '‚úì ¬°Excelente Decisi√≥n!' : selected === scenario.correct - 1 || selected === scenario.correct + 1 ? '‚Üí Buena Aproximaci√≥n' : '‚úó Reflexionemos'}</div>
                    <div class="feedback-text">${feedbackContent}</div>
                    <div class="civic-lesson">
                        <div class="civic-lesson-title">üìò Aprendizaje C√≠vico:</div>
                        <div class="civic-lesson-text">${scenario.lesson}</div>
                    </div>
                </div>
            `;
            
            updateStats();
            
            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < scenarios.length) {
                    showScenario();
                } else {
                    showCompletion();
                }
            }, 5000);
        }

        function updateStats() {
            document.getElementById('currentScore').textContent = score;
            document.getElementById('goodDecisions').textContent = goodDecisions;
            document.getElementById('questionNum').textContent = `${currentQuestion + 1}/6`;
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / scenarios.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function showCompletion() {
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('completionScreen').style.display = 'block';
            
            const finalScore = document.getElementById('finalScore');
            const performanceMessage = document.getElementById('performanceMessage');
            const citizenshipBadges = document.getElementById('citizenshipBadges');
            const learningsList = document.getElementById('learningsList');
            
            finalScore.textContent = `${goodDecisions}/6 decisiones excelentes`;
            
            let badges = '';
            let message = '';
            
            if (goodDecisions === 6) {
                message = '¬°Perfecto! Eres un ciudadano modelo que comprende sus derechos y deberes üåü';
                badges = '<div class="citizenship-badge">üèÜ Ciudadano Ejemplar</div>';
            } else if (goodDecisions >= 4) {
                message = '¬°Muy bien! Demuestras gran conciencia c√≠vica y responsabilidad social üëè';
                badges = '<div class="citizenship-badge">‚≠ê Ciudadano Responsable</div>';
            } else if (goodDecisions >= 2) {
                message = 'Buen comienzo. Contin√∫a aprendiendo sobre ciudadan√≠a y democracia üí™';
                badges = '<div class="citizenship-badge">üéØ Ciudadano en Formaci√≥n</div>';
            } else {
                message = 'Sigue aprendiendo. Cada reflexi√≥n te acerca m√°s a ser un mejor ciudadano üöÄ';
                badges = '<div class="citizenship-badge">üå± Aprendiz C√≠vico</div>';
            }
            
            performanceMessage.textContent = message;
            citizenshipBadges.innerHTML = badges;
            
            learningsList.innerHTML = '';
            learnings.forEach(learning => {
                const li = document.createElement('li');
                li.textContent = learning;
                learningsList.appendChild(li);
            });
        }
    </script>
</body>
</html>