<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viaje a la Edad Media</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FEF0F0 0%, #EDA2A1 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #E77B66, #EE9A5B);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }

        .score-item {
            background: rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .game-area {
            padding: 40px;
            background: #FEF0F0;
        }

        .topic-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .topic-btn {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        .topic-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .topic-btn.active {
            background: linear-gradient(135deg, #E15034, #E77B66);
        }

        .game-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            min-height: 400px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .visual-scene {
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #EDA2A1, #EE9A5B);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            min-height: 180px;
            position: relative;
            overflow: hidden;
        }

        .scene-icon {
            font-size: 7em;
            animation: float 3s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .info-box {
            background: #FEF0F0;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #EE9A5B;
            margin: 20px 0;
            line-height: 1.8;
            font-size: 1.2em;
        }

        .info-title {
            color: #E15034;
            font-weight: bold;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .question-box {
            font-size: 1.4em;
            color: #E15034;
            margin: 25px 0;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            background: #FEF0F0;
            border-radius: 15px;
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .option-btn {
            background: white;
            border: 3px solid #EDA2A1;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option-icon {
            font-size: 2.5em;
            min-width: 60px;
            text-align: center;
        }

        .option-btn:hover {
            background: #EDA2A1;
            color: white;
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: #889F92;
            color: white;
            border-color: #889F92;
            animation: pulse 0.5s;
        }

        .option-btn.incorrect {
            background: #E15034;
            color: white;
            border-color: #E15034;
            animation: shake 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .timeline {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #FEF0F0;
            border-radius: 10px;
            border-left: 5px solid #889F92;
        }

        .timeline-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-card {
            background: #FEF0F0;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .comparison-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .comparison-title {
            font-weight: bold;
            color: #E77B66;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .match-activity {
            margin: 20px 0;
        }

        .match-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .match-item {
            background: #FEF0F0;
            border: 3px solid #EDA2A1;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 1.1em;
        }

        .match-item:hover {
            background: #EE9A5B;
            color: white;
        }

        .match-item.selected {
            background: #889F92;
            color: white;
            border-color: #889F92;
        }

        .feedback {
            margin-top: 20px;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.3em;
            text-align: center;
            font-weight: bold;
        }

        .feedback.success {
            background: #889F92;
            color: white;
        }

        .feedback.error {
            background: #E15034;
            color: white;
        }

        .celebration {
            text-align: center;
            font-size: 3em;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .next-btn {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .highlight {
            background: #EE9A5B;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .medieval-fact {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .fact-icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .character-card {
            background: white;
            border: 3px solid #EDA2A1;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .character-card:hover {
            transform: scale(1.05);
            border-color: #E77B66;
        }

        .character-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè∞ Viaje a la Edad Media ‚öîÔ∏è</h1>
            <div class="score-board">
                <div class="score-item">‚≠ê Puntos: <span id="score">0</span></div>
                <div class="score-item">üèÜ Nivel: <span id="level">1</span></div>
            </div>
        </div>

        <div class="game-area">
            <div class="topic-selector">
                <button class="topic-btn active" onclick="changeTopic('castillos')">üè∞ Castillos</button>
                <button class="topic-btn" onclick="changeTopic('caballeros')">‚öîÔ∏è Caballeros</button>
                <button class="topic-btn" onclick="changeTopic('feudalismo')">üëë Feudalismo</button>
                <button class="topic-btn" onclick="changeTopic('vida')">üèòÔ∏è Vida Diaria</button>
                <button class="topic-btn" onclick="changeTopic('religion')">‚õ™ Religi√≥n</button>
                <button class="topic-btn" onclick="changeTopic('cultura')">üìú Cultura</button>
            </div>

            <div class="game-content" id="gameContent"></div>
        </div>
    </div>

    <script>
        let score = 0;
        let level = 1;
        let currentTopic = 'castillos';
        let currentQuestion = 0;
        let selectedMatch = null;

        const topics = {
            castillos: [
                {
                    visual: 'üè∞',
                    info: 'Los castillos medievales eran grandes construcciones de piedra. Serv√≠an como <span class="highlight">fortalezas</span> para proteger a los se√±ores feudales y sus familias de los enemigos.',
                    question: '¬øPara qu√© se constru√≠an los castillos?',
                    options: [
                        {icon: 'üõ°Ô∏è', text: 'Para protegerse de enemigos'},
                        {icon: 'üè™', text: 'Para vender productos'},
                        {icon: 'üè´', text: 'Para estudiar matem√°ticas'},
                        {icon: 'üé™', text: 'Para hacer circos'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! Los castillos eran fortalezas para protecci√≥n y defensa.'
                },
                {
                    visual: 'üè∞',
                    info: 'Las partes del castillo inclu√≠an: las <span class="highlight">murallas</span> altas, las <span class="highlight">torres</span> de vigilancia, el <span class="highlight">foso</span> con agua y el <span class="highlight">puente levadizo</span>.',
                    question: '¬øQu√© rodeaba al castillo para protegerlo?',
                    options: [
                        {icon: 'üåä', text: 'Un foso con agua'},
                        {icon: 'üå≥', text: '√Årboles grandes'},
                        {icon: 'üèñÔ∏è', text: 'Una playa'},
                        {icon: 'üå∏', text: 'Jardines de flores'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! El foso con agua dificultaba el acceso de enemigos.'
                },
                {
                    visual: 'üóº',
                    info: 'Las torres del castillo eran muy importantes. Desde all√≠, los guardias vigilaban y pod√≠an ver si se acercaban enemigos desde lejos.',
                    question: '¬øQu√© hac√≠an los guardias en las torres?',
                    options: [
                        {icon: 'üëÄ', text: 'Vigilar y observar'},
                        {icon: 'üò¥', text: 'Dormir todo el d√≠a'},
                        {icon: 'üçΩÔ∏è', text: 'Cocinar comida'},
                        {icon: 'üé®', text: 'Pintar cuadros'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los guardias vigilaban desde las torres para detectar peligros.'
                },
                {
                    type: 'match',
                    visual: 'üè∞',
                    question: 'Une cada parte del castillo con su funci√≥n:',
                    pairs: [
                        {item: 'üóº Torre', match: 'Vigilar'},
                        {item: 'üåä Foso', match: 'Proteger'},
                        {item: 'üö™ Puente', match: 'Entrar'},
                        {item: 'üß± Muralla', match: 'Defender'}
                    ],
                    explanation: '¬°Muy bien! Conoces las partes del castillo.'
                },
                {
                    visual: 'üè∞',
                    info: 'Dentro del castillo hab√≠a muchas habitaciones. El <span class="highlight">sal√≥n principal</span> era donde el se√±or recib√≠a visitas y hac√≠a grandes banquetes.',
                    question: '¬øQu√© se hac√≠a en el sal√≥n principal?',
                    options: [
                        {icon: 'üçñ', text: 'Banquetes y reuniones'},
                        {icon: 'üõèÔ∏è', text: 'Dormir toda la noche'},
                        {icon: 'üê¥', text: 'Guardar caballos'},
                        {icon: 'üíß', text: 'Almacenar agua'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! El sal√≥n era para recepciones y grandes comidas.'
                },
                {
                    visual: 'üèóÔ∏è',
                    info: 'Construir un castillo tomaba muchos a√±os. Cientos de trabajadores usaban piedras pesadas y trabajaban duro cada d√≠a.',
                    question: '¬øCu√°nto tiempo tomaba construir un castillo?',
                    options: [
                        {icon: 'üìÖ', text: 'Muchos a√±os'},
                        {icon: '‚è∞', text: 'Unas horas'},
                        {icon: 'üìÜ', text: 'Una semana'},
                        {icon: 'üåô', text: 'Una noche'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! Los castillos tardaban a√±os en construirse.'
                }
            ],
            caballeros: [
                {
                    visual: '‚öîÔ∏è',
                    info: 'Los caballeros eran guerreros nobles que serv√≠an a un se√±or feudal. Deb√≠an ser <span class="highlight">valientes, leales y honorables</span>.',
                    question: '¬øQu√© cualidades deb√≠a tener un caballero?',
                    options: [
                        {icon: 'üí™', text: 'Valent√≠a y honor'},
                        {icon: 'üò¥', text: 'Pereza y miedo'},
                        {icon: 'üòà', text: 'Maldad y ego√≠smo'},
                        {icon: 'ü§•', text: 'Mentira y traici√≥n'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los caballeros segu√≠an un c√≥digo de honor.'
                },
                {
                    visual: 'üõ°Ô∏è',
                    info: 'La armadura proteg√≠a al caballero en batalla. Estaba hecha de metal y pesaba mucho. Tambi√©n usaban un <span class="highlight">casco</span> y un <span class="highlight">escudo</span>.',
                    question: '¬øPara qu√© usaban armadura los caballeros?',
                    options: [
                        {icon: 'üõ°Ô∏è', text: 'Para protegerse en batalla'},
                        {icon: 'üëî', text: 'Para verse elegantes'},
                        {icon: 'üèÉ', text: 'Para correr m√°s r√°pido'},
                        {icon: 'üé≠', text: 'Para actuar en teatro'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! La armadura los proteg√≠a de las armas enemigas.'
                },
                {
                    visual: 'üê¥',
                    info: 'Los caballeros montaban caballos entrenados para la batalla. El caballo era su compa√±ero m√°s importante y lo cuidaban mucho.',
                    question: '¬øPor qu√© era importante el caballo?',
                    options: [
                        {icon: '‚öîÔ∏è', text: 'Para batallar y viajar'},
                        {icon: 'üé†', text: 'Para jugar en carruseles'},
                        {icon: 'üé™', text: 'Para hacer trucos de circo'},
                        {icon: 'üè™', text: 'Para venderlo en el mercado'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! El caballo era esencial para el caballero.'
                },
                {
                    visual: 'üéñÔ∏è',
                    info: 'Para convertirse en caballero, un joven deb√≠a entrenar desde ni√±o. Primero era <span class="highlight">paje</span>, luego <span class="highlight">escudero</span>, y finalmente caballero.',
                    question: '¬øC√≥mo empezaba el entrenamiento de un caballero?',
                    options: [
                        {icon: 'üë¶', text: 'Como paje desde ni√±o'},
                        {icon: 'üë¥', text: 'Como anciano sabio'},
                        {icon: 'üë∂', text: 'Como beb√©'},
                        {icon: 'üéì', text: 'En la universidad'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! Los ni√±os empezaban como pajes muy j√≥venes.'
                },
                {
                    visual: 'üèÜ',
                    info: 'Los torneos eran competencias donde los caballeros mostraban sus habilidades. Luchaban con lanzas mientras montaban caballos.',
                    question: '¬øQu√© eran los torneos medievales?',
                    options: [
                        {icon: 'üéØ', text: 'Competencias de caballeros'},
                        {icon: 'üé™', text: 'Espect√°culos de payasos'},
                        {icon: 'üè´', text: 'Clases de matem√°ticas'},
                        {icon: 'üç¥', text: 'Concursos de cocina'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los torneos eran competencias de habilidad y valor.'
                },
                {
                    visual: 'üó°Ô∏è',
                    info: 'Las armas principales del caballero eran la <span class="highlight">espada</span>, la <span class="highlight">lanza</span> y el <span class="highlight">hacha</span>. Deb√≠an entrenar mucho para usarlas bien.',
                    question: '¬øQu√© arma era s√≠mbolo del caballero?',
                    options: [
                        {icon: '‚öîÔ∏è', text: 'La espada'},
                        {icon: 'üî´', text: 'La pistola'},
                        {icon: 'üèπ', text: 'El arco y flecha'},
                        {icon: 'üî®', text: 'El martillo'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! La espada era el arma noble del caballero.'
                }
            ],
            feudalismo: [
                {
                    visual: 'üëë',
                    info: 'En el sistema feudal, el <span class="highlight">rey</span> estaba en la cima. Daba tierras a los nobles a cambio de lealtad y servicio militar.',
                    question: '¬øQui√©n estaba en la cima del sistema feudal?',
                    options: [
                        {icon: 'üëë', text: 'El rey'},
                        {icon: 'üë®‚Äçüåæ', text: 'El campesino'},
                        {icon: 'üßô', text: 'El mago'},
                        {icon: 'ü§°', text: 'El buf√≥n'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! El rey era la m√°xima autoridad.'
                },
                {
                    visual: 'üèõÔ∏è',
                    info: 'Los <span class="highlight">se√±ores feudales</span> eran nobles que recib√≠an tierras del rey. A cambio, proteg√≠an esas tierras y serv√≠an al rey en las guerras.',
                    question: '¬øQu√© recib√≠an los se√±ores feudales del rey?',
                    options: [
                        {icon: 'üó∫Ô∏è', text: 'Tierras para gobernar'},
                        {icon: 'üí∞', text: 'Solo dinero'},
                        {icon: 'üçñ', text: 'Comida gratis'},
                        {icon: 'üéÅ', text: 'Regalos de cumplea√±os'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! Recib√≠an tierras llamadas feudos.'
                },
                {
                    visual: 'üë®‚Äçüåæ',
                    info: 'Los <span class="highlight">siervos</span> trabajaban la tierra del se√±or. No eran libres y deb√≠an entregar parte de su cosecha al se√±or feudal.',
                    question: '¬øQui√©nes trabajaban la tierra?',
                    options: [
                        {icon: 'üë®‚Äçüåæ', text: 'Los siervos'},
                        {icon: 'üëë', text: 'Los reyes'},
                        {icon: '‚öîÔ∏è', text: 'Los caballeros'},
                        {icon: '‚õ™', text: 'Los sacerdotes'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los siervos cultivaban la tierra.'
                },
                {
                    type: 'hierarchy',
                    visual: 'üìä',
                    question: 'Ordena la sociedad feudal de arriba a abajo:',
                    info: 'La sociedad medieval estaba organizada en niveles. Cada persona ten√≠a su lugar y deberes espec√≠ficos.',
                    items: [
                        {icon: 'üëë', text: 'Rey', order: 1},
                        {icon: 'üèõÔ∏è', text: 'Nobles', order: 2},
                        {icon: '‚öîÔ∏è', text: 'Caballeros', order: 3},
                        {icon: 'üë®‚Äçüåæ', text: 'Siervos', order: 4}
                    ],
                    explanation: '¬°Excelente! Has ordenado correctamente la jerarqu√≠a feudal.'
                },
                {
                    visual: 'ü§ù',
                    info: 'El <span class="highlight">vasallaje</span> era un juramento de lealtad. Un vasallo promet√≠a servir a su se√±or, y el se√±or promet√≠a protegerlo.',
                    question: '¬øQu√© era el vasallaje?',
                    options: [
                        {icon: 'ü§ù', text: 'Un juramento de lealtad'},
                        {icon: 'üéâ', text: 'Una fiesta grande'},
                        {icon: '‚öîÔ∏è', text: 'Una batalla'},
                        {icon: 'üìö', text: 'Un libro antiguo'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! El vasallaje era un compromiso de lealtad mutua.'
                },
                {
                    visual: 'üåæ',
                    info: 'El <span class="highlight">feudo</span> era la tierra que el se√±or daba a su vasallo. Inclu√≠a campos, bosques, aldeas y todo lo que hab√≠a all√≠.',
                    question: '¬øQu√© era un feudo?',
                    options: [
                        {icon: 'üó∫Ô∏è', text: 'Tierra dada por el se√±or'},
                        {icon: 'üí∞', text: 'Una bolsa de monedas'},
                        {icon: '‚öîÔ∏è', text: 'Un tipo de espada'},
                        {icon: 'üé™', text: 'Un circo ambulante'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! El feudo era la base del sistema feudal.'
                }
            ],
            vida: [
                {
                    visual: 'üèòÔ∏è',
                    info: 'La mayor√≠a de la gente viv√≠a en <span class="highlight">aldeas</span> peque√±as. Las casas eran sencillas, hechas de madera y paja.',
                    question: '¬øD√≥nde viv√≠a la mayor√≠a de la gente?',
                    options: [
                        {icon: 'üèòÔ∏è', text: 'En aldeas peque√±as'},
                        {icon: 'üè∞', text: 'En castillos grandes'},
                        {icon: 'üèôÔ∏è', text: 'En ciudades modernas'},
                        {icon: 'üèñÔ∏è', text: 'En la playa'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! La gente com√∫n viv√≠a en aldeas rurales.'
                },
                {
                    visual: 'üçû',
                    info: 'La comida principal era <span class="highlight">pan</span>, vegetales y potaje (sopa espesa). La carne era un lujo que solo los ricos com√≠an frecuentemente.',
                    question: '¬øCu√°l era el alimento m√°s com√∫n?',
                    options: [
                        {icon: 'üçû', text: 'El pan'},
                        {icon: 'üçï', text: 'La pizza'},
                        {icon: 'üçî', text: 'Las hamburguesas'},
                        {icon: 'üç∞', text: 'Los pasteles'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! El pan era el alimento b√°sico medieval.'
                },
                {
                    visual: 'üë®‚Äçüåæ',
                    info: 'El trabajo en el campo era muy duro. La gente trabajaba desde el amanecer hasta el anochecer, cultivando y cosechando.',
                    question: '¬øC√≥mo era el trabajo de los campesinos?',
                    options: [
                        {icon: 'üí™', text: 'Muy duro y largo'},
                        {icon: 'üò¥', text: 'F√°cil y corto'},
                        {icon: 'üéÆ', text: 'Como jugar videojuegos'},
                        {icon: 'üèñÔ∏è', text: 'Como unas vacaciones'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! Los campesinos trabajaban duramente todo el d√≠a.'
                },
                {
                    visual: 'üé≠',
                    info: 'Para divertirse, la gente ten√≠a <span class="highlight">ferias</span>, <span class="highlight">festivales</span> y actuaciones de juglares que cantaban y contaban historias.',
                    question: '¬øC√≥mo se divert√≠a la gente?',
                    options: [
                        {icon: 'üé™', text: 'Con ferias y festivales'},
                        {icon: 'üì±', text: 'Con tel√©fonos m√≥viles'},
                        {icon: 'üì∫', text: 'Viendo televisi√≥n'},
                        {icon: 'üéÆ', text: 'Jugando videojuegos'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! Las ferias eran momentos especiales de diversi√≥n.'
                },
                {
                    visual: 'üëó',
                    info: 'La ropa depend√≠a de la clase social. Los nobles vest√≠an <span class="highlight">telas finas</span> y colores brillantes. Los campesinos usaban ropa simple de lana.',
                    question: '¬øQu√© diferenciaba la ropa de nobles y campesinos?',
                    options: [
                        {icon: 'üëî', text: 'La calidad y los colores'},
                        {icon: 'üëï', text: 'Todos vest√≠an igual'},
                        {icon: 'üéΩ', text: 'Usaban uniformes deportivos'},
                        {icon: 'ü¶∫', text: 'Usaban chalecos modernos'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! La ropa mostraba la posici√≥n social.'
                },
                {
                    visual: 'üïØÔ∏è',
                    info: 'No hab√≠a electricidad. La gente usaba <span class="highlight">velas</span> y <span class="highlight">antorchas</span> para iluminarse de noche. Las casas eran oscuras y fr√≠as.',
                    question: '¬øC√≥mo se iluminaban las casas de noche?',
                    options: [
                        {icon: 'üïØÔ∏è', text: 'Con velas y antorchas'},
                        {icon: 'üí°', text: 'Con bombillas el√©ctricas'},
                        {icon: 'üî¶', text: 'Con linternas modernas'},
                        {icon: 'üì±', text: 'Con celulares'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! Las velas eran la √∫nica fuente de luz artificial.'
                }
            ],
            religion: [
                {
                    visual: '‚õ™',
                    info: 'La <span class="highlight">Iglesia Cat√≥lica</span> era muy poderosa en la Edad Media. Influ√≠a en la vida de todas las personas, desde reyes hasta campesinos.',
                    question: '¬øQu√© instituci√≥n era muy poderosa?',
                    options: [
                        {icon: '‚õ™', text: 'La Iglesia Cat√≥lica'},
                        {icon: 'üè™', text: 'Las tiendas'},
                        {icon: 'üè´', text: 'Las escuelas modernas'},
                        {icon: 'üè¶', text: 'Los bancos'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! La Iglesia ten√≠a gran poder e influencia.'
                },
                {
                    visual: 'üôè',
                    info: 'La gente iba a <span class="highlight">misa</span> los domingos y en d√≠as festivos religiosos. La religi√≥n era parte central de la vida diaria.',
                    question: '¬øCu√°ndo iban las personas a la iglesia?',
                    options: [
                        {icon: 'üìÖ', text: 'Los domingos y d√≠as festivos'},
                        {icon: 'üåô', text: 'Solo de noche'},
                        {icon: 'üéÑ', text: 'Solo en Navidad'},
                        {icon: '‚ùå', text: 'Nunca iban'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! La misa dominical era obligatoria.'
                },
                {
                    visual: 'üë¥',
                    info: 'Los <span class="highlight">monjes</span> viv√≠an en monasterios. Dedicaban su vida a la oraci√≥n, el estudio y copiar libros a mano.',
                    question: '¬øQu√© hac√≠an los monjes?',
                    options: [
                        {icon: 'üìñ', text: 'Orar y copiar libros'},
                        {icon: '‚öîÔ∏è', text: 'Luchar en batallas'},
                        {icon: 'üë®‚Äçüåæ', text: 'Vender en el mercado'},
                        {icon: 'üé™', text: 'Hacer espect√°culos'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los monjes preservaban el conocimiento copiando libros.'
                },
                {
                    visual: '‚õ™',
                    info: 'Las <span class="highlight">catedrales</span> eran iglesias enormes y hermosas. Tomaban d√©cadas en construirse y ten√≠an vitrales coloridos.',
                    question: '¬øQu√© eran las catedrales?',
                    options: [
                        {icon: '‚õ™', text: 'Iglesias grandes y hermosas'},
                        {icon: 'üè∞', text: 'Castillos militares'},
                        {icon: 'üè™', text: 'Mercados cubiertos'},
                        {icon: 'üè´', text: 'Escuelas p√∫blicas'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! Las catedrales eran obras arquitect√≥nicas impresionantes.'
                },
                {
                    visual: '‚úùÔ∏è',
                    info: 'Las <span class="highlight">Cruzadas</span> fueron expediciones militares religiosas. Los cristianos europeos intentaban recuperar Tierra Santa.',
                    question: '¬øQu√© eran las Cruzadas?',
                    options: [
                        {icon: '‚öîÔ∏è', text: 'Expediciones militares religiosas'},
                        {icon: 'üé™', text: 'Festivales musicales'},
                        {icon: 'üìö', text: 'Concursos de lectura'},
                        {icon: 'üèÉ', text: 'Carreras deportivas'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! Las Cruzadas mezclaban religi√≥n y guerra.'
                },
                {
                    visual: 'üìø',
                    info: 'Las <span class="highlight">peregrinaciones</span> eran viajes largos a lugares sagrados. La gente caminaba durante semanas para visitar santuarios importantes.',
                    question: '¬øQu√© era una peregrinaci√≥n?',
                    options: [
                        {icon: 'üö∂', text: 'Viaje a un lugar sagrado'},
                        {icon: 'üèñÔ∏è', text: 'Vacaciones en la playa'},
                        {icon: 'üè™', text: 'Ir de compras'},
                        {icon: 'üé¢', text: 'Visitar parques de diversiones'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! Las peregrinaciones eran viajes de fe.'
                }
            ],
            cultura: [
                {
                    visual: 'üìú',
                    info: 'Los libros se copiaban <span class="highlight">a mano</span> porque no exist√≠a la imprenta. Un solo libro pod√≠a tomar meses en completarse.',
                    question: '¬øC√≥mo se hac√≠an los libros?',
                    options: [
                        {icon: '‚úçÔ∏è', text: 'Copiados a mano'},
                        {icon: 'üñ®Ô∏è', text: 'Con impresoras'},
                        {icon: 'üíª', text: 'En computadoras'},
                        {icon: 'üì±', text: 'En tel√©fonos'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Copiar libros era un trabajo largo y cuidadoso.'
                },
                {
                    visual: 'üé≠',
                    info: 'Los <span class="highlight">juglares</span> eran artistas ambulantes. Viajaban de pueblo en pueblo cantando, contando historias y haciendo acrobacias.',
                    question: '¬øQui√©nes eran los juglares?',
                    options: [
                        {icon: 'üé™', text: 'Artistas ambulantes'},
                        {icon: '‚öîÔ∏è', text: 'Guerreros valientes'},
                        {icon: 'üë®‚Äçüåæ', text: 'Agricultores'},
                        {icon: 'üëë', text: 'Reyes poderosos'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! Los juglares entreten√≠an a la gente.'
                },
                {
                    visual: 'üèõÔ∏è',
                    info: 'Las <span class="highlight">universidades</span> comenzaron en la Edad Media. All√≠ se estudiaba teolog√≠a, medicina, derecho y filosof√≠a.',
                    question: '¬øQu√© eran las universidades medievales?',
                    options: [
                        {icon: 'üìö', text: 'Lugares de estudio superior'},
                        {icon: 'üè™', text: 'Mercados grandes'},
                        {icon: 'üè∞', text: 'Castillos fortificados'},
                        {icon: '‚õ™', text: 'Iglesias peque√±as'}
                    ],
                    correct: 0,
                    explanation: '¬°Muy bien! Las primeras universidades nacieron en esta √©poca.'
                },
                {
                    visual: 'üé®',
                    info: 'El <span class="highlight">arte medieval</span> era principalmente religioso. Las pinturas mostraban escenas de la Biblia y santos.',
                    question: '¬øQu√© temas ten√≠a el arte medieval?',
                    options: [
                        {icon: '‚úùÔ∏è', text: 'Temas religiosos'},
                        {icon: 'üöó', text: 'Carros modernos'},
                        {icon: 'üèôÔ∏è', text: 'Ciudades futuras'},
                        {icon: 'üëΩ', text: 'Extraterrestres'}
                    ],
                    correct: 0,
                    explanation: '¬°Correcto! La religi√≥n inspiraba la mayor√≠a del arte.'
                },
                {
                    visual: 'üéµ',
                    info: 'La m√∫sica medieval inclu√≠a <span class="highlight">cantos gregorianos</span> en las iglesias y canciones populares en las aldeas.',
                    question: '¬øD√≥nde se cantaban los cantos gregorianos?',
                    options: [
                        {icon: '‚õ™', text: 'En las iglesias'},
                        {icon: 'üè∞', text: 'En los castillos'},
                        {icon: 'üèñÔ∏è', text: 'En la playa'},
                        {icon: 'üè™', text: 'En el mercado'}
                    ],
                    correct: 0,
                    explanation: '¬°Perfecto! Los cantos gregorianos eran m√∫sica religiosa.'
                },
                {
                    visual: 'üìñ',
                    info: 'Las <span class="highlight">leyendas</span> del Rey Arturo y los Caballeros de la Mesa Redonda se hicieron famosas en esta √©poca.',
                    question: '¬øQu√© historias eran populares?',
                    options: [
                        {icon: '‚öîÔ∏è', text: 'Leyendas de caballeros'},
                        {icon: 'üöÄ', text: 'Viajes espaciales'},
                        {icon: 'ü¶ñ', text: 'Dinosaurios'},
                        {icon: 'ü§ñ', text: 'Robots'}
                    ],
                    correct: 0,
                    explanation: '¬°Excelente! Las leyendas de caballer√≠a eran muy populares.'
                }
            ]
        };

        function changeTopic(topic) {
            currentTopic = topic;
            currentQuestion = 0;
            
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function loadQuestion() {
            const questions = topics[currentTopic];
            if (currentQuestion >= questions.length) {
                currentQuestion = 0;
            }
            
            const q = questions[currentQuestion];
            const content = document.getElementById('gameContent');
            
            if (q.type === 'match') {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="match-activity">
                        <div class="match-grid">
                            <div>
                                ${q.pairs.map((pair, i) => 
                                    `<div class="match-item" onclick="selectMatch(${i}, 'item')" id="item${i}">${pair.item}</div>`
                                ).join('')}
                            </div>
                            <div>
                                ${q.pairs.map((pair, i) => 
                                    `<div class="match-item" onclick="selectMatch(${i}, 'match')" id="match${i}">${pair.match}</div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
            } else if (q.type === 'hierarchy') {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="info-box">
                        ${q.info}
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="character-grid" id="characterGrid">
                        ${q.items.sort(() => Math.random() - 0.5).map((item, i) => 
                            `<div class="character-card" onclick="selectHierarchy(${item.order})" data-order="${item.order}">
                                <div class="character-icon">${item.icon}</div>
                                <div>${item.text}</div>
                            </div>`
                        ).join('')}
                    </div>
                    <div class="medieval-fact">
                        <span class="fact-icon">üí°</span>
                        Toca las opciones en el orden correcto: de arriba hacia abajo en la pir√°mide social.
                    </div>
                `;
                window.hierarchySelected = [];
            } else {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-title">üìö Aprende sobre la Edad Media:</div>
                        ${q.info}
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, i) => 
                            `<button class="option-btn" onclick="checkAnswer(${i})">
                                <span class="option-icon">${opt.icon}</span>
                                <span>${opt.text}</span>
                            </button>`
                        ).join('')}
                    </div>
                `;
            }
        }

        let matchedPairs = [];
        let firstSelection = null;

        function selectMatch(index, type) {
            if (firstSelection === null) {
                firstSelection = {index, type};
                document.getElementById(type + index).classList.add('selected');
            } else {
                if (firstSelection.type !== type && firstSelection.index === index) {
                    matchedPairs.push(index);
                    document.getElementById(firstSelection.type + firstSelection.index).style.opacity = '0.3';
                    document.getElementById(type + index).style.opacity = '0.3';
                    
                    const q = topics[currentTopic][currentQuestion];
                    if (matchedPairs.length === q.pairs.length) {
                        setTimeout(() => {
                            showFeedback(true, q.explanation);
                            updateScore(20);
                        }, 500);
                    }
                } else {
                    document.getElementById(firstSelection.type + firstSelection.index).classList.remove('selected');
                }
                firstSelection = null;
            }
        }

        window.hierarchySelected = [];

        function selectHierarchy(order) {
            window.hierarchySelected.push(order);
            event.target.style.opacity = '0.3';
            event.target.style.pointerEvents = 'none';
            
            const q = topics[currentTopic][currentQuestion];
            if (window.hierarchySelected.length === q.items.length) {
                const isCorrect = window.hierarchySelected.every((val, i) => val === i + 1);
                showFeedback(isCorrect, q.explanation);
                if (isCorrect) updateScore(20);
            }
        }

        function checkAnswer(selected) {
            const q = topics[currentTopic][currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (selected === q.correct) {
                buttons[selected].classList.add('correct');
                showFeedback(true, q.explanation);
                updateScore(15);
            } else {
                buttons[selected].classList.add('incorrect');
                buttons[q.correct].classList.add('correct');
                showFeedback(false, q.explanation);
            }
        }

        function showFeedback(isCorrect, message) {
            const content = document.getElementById('gameContent');
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback ${isCorrect ? 'success' : 'error'}`;
            feedbackDiv.innerHTML = `
                ${isCorrect ? '<div class="celebration">üéâ üè∞ ‚öîÔ∏è</div>' : 'üí™'}
                <p>${message}</p>
                <button class="next-btn" onclick="nextQuestion()">Siguiente Tema ‚Üí</button>
            `;
            content.appendChild(feedbackDiv);
        }

        function nextQuestion() {
            currentQuestion++;
            matchedPairs = [];
            firstSelection = null;
            loadQuestion();
        }

        function updateScore(points) {
            score += points;
            document.getElementById('score').textContent = score;
            
            if (score >= level * 60) {
                level++;
                document.getElementById('level').textContent = level;
            }
        }

        loadQuestion();
    </script>
</body>
</html>