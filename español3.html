<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taller de Escritura Creativa - NeuroKids</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #FEF0F0 0%, #EDA2A1 30%, #889F92 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #E15034;
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            color: #889F92;
            font-size: 1.1rem;
        }

        .genre-selector {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .genre-title {
            color: #E15034;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .genre-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .genre-card {
            background: linear-gradient(135deg, #E15034, #E77B66);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .genre-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(225, 80, 52, 0.3);
        }

        .genre-card.selected {
            border-color: #889F92;
            transform: scale(1.05);
        }

        .genre-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .genre-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .writing-area {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .writing-area.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .prompt-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .prompt-title {
            color: #E15034;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #889F92, #6b8578);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .refresh-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(136, 159, 146, 0.3);
        }

        .prompt-text {
            background: linear-gradient(135deg, #E77B66, #EE9A5B);
            color: white;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .prompt-words {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .word-chip {
            background: rgba(255, 255, 255, 0.9);
            color: #E15034;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .editor-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .editor-title {
            color: #E15034;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .word-counter {
            display: flex;
            gap: 20px;
        }

        .counter {
            text-align: center;
        }

        .counter-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #EE9A5B;
        }

        .counter-label {
            font-size: 0.8rem;
            color: #889F92;
            text-transform: uppercase;
        }

        .text-input {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            border: 2px solid #EDA2A1;
            border-radius: 15px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            line-height: 1.8;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: #E15034;
            box-shadow: 0 0 0 3px rgba(225, 80, 52, 0.1);
        }

        .tips-section {
            background: rgba(136, 159, 146, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .tips-title {
            color: #889F92;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tips-list {
            list-style: none;
            padding: 0;
        }

        .tips-list li {
            color: #666;
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .tips-list li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #889F92;
            font-weight: bold;
        }

        .actions-section {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #E15034, #E77B66);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(225, 80, 52, 0.3);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #889F92, #6b8578);
        }

        .feedback-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            display: none;
        }

        .feedback-panel.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-title {
            color: #E15034;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .feedback-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .feedback-card {
            background: linear-gradient(135deg, #E77B66, #EE9A5B);
            color: white;
            padding: 20px;
            border-radius: 15px;
        }

        .feedback-card-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-card-content {
            line-height: 1.6;
        }

        .suggestions-box {
            background: rgba(136, 159, 146, 0.1);
            padding: 20px;
            border-radius: 15px;
        }

        .suggestions-title {
            color: #889F92;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .suggestion-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #EE9A5B;
        }

        .saved-works {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .saved-title {
            color: #E15034;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .works-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }

        .work-card {
            background: linear-gradient(135deg, rgba(237, 162, 161, 0.2), rgba(136, 159, 146, 0.2));
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .work-card:hover {
            transform: translateY(-5px);
            border-color: #E77B66;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .work-genre {
            color: #EE9A5B;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .work-preview {
            color: #333;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .work-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(225, 80, 52, 0.2);
            font-size: 0.85rem;
            color: #889F92;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .genre-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .word-counter {
                flex-direction: column;
                gap: 10px;
            }

            .actions-section {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span>üé≠</span> Taller de Escritura Creativa <span>üé≠</span></h1>
            <p>Desarrolla tu creatividad escribiendo historias √∫nicas</p>
        </div>

        <div class="genre-selector" id="genreSelector">
            <h2 class="genre-title">Elige tu g√©nero literario</h2>
            <div class="genre-grid">
                <div class="genre-card" onclick="selectGenre('cuento')">
                    <div class="genre-icon">üìö</div>
                    <div class="genre-name">Cuento</div>
                </div>
                <div class="genre-card" onclick="selectGenre('poesia')">
                    <div class="genre-icon">üå∏</div>
                    <div class="genre-name">Poes√≠a</div>
                </div>
                <div class="genre-card" onclick="selectGenre('aventura')">
                    <div class="genre-icon">üó∫Ô∏è</div>
                    <div class="genre-name">Aventura</div>
                </div>
                <div class="genre-card" onclick="selectGenre('fantasia')">
                    <div class="genre-icon">ü¶Ñ</div>
                    <div class="genre-name">Fantas√≠a</div>
                </div>
                <div class="genre-card" onclick="selectGenre('misterio')">
                    <div class="genre-icon">üîç</div>
                    <div class="genre-name">Misterio</div>
                </div>
                <div class="genre-card" onclick="selectGenre('descriptivo')">
                    <div class="genre-icon">üé®</div>
                    <div class="genre-name">Descriptivo</div>
                </div>
            </div>
        </div>

        <div class="writing-area" id="writingArea">
            <div class="prompt-section">
                <div class="prompt-header">
                    <h3 class="prompt-title">Tu desaf√≠o de escritura</h3>
                    <button class="refresh-btn" onclick="refreshPrompt()">üîÑ Nuevo desaf√≠o</button>
                </div>
                <div class="prompt-text" id="promptText"></div>
                <div class="prompt-words" id="promptWords"></div>
            </div>

            <div class="editor-section">
                <div class="editor-header">
                    <h3 class="editor-title">Escribe tu creaci√≥n</h3>
                    <div class="word-counter">
                        <div class="counter">
                            <div class="counter-value" id="wordCount">0</div>
                            <div class="counter-label">Palabras</div>
                        </div>
                        <div class="counter">
                            <div class="counter-value" id="charCount">0</div>
                            <div class="counter-label">Caracteres</div>
                        </div>
                    </div>
                </div>

                <textarea 
                    class="text-input" 
                    id="textInput" 
                    placeholder="Empieza a escribir tu historia aqu√≠..."
                    oninput="updateCounters()"
                ></textarea>

                <div class="tips-section">
                    <div class="tips-title">üí° Consejos de escritura</div>
                    <ul class="tips-list" id="tipsList"></ul>
                </div>

                <div class="actions-section">
                    <button class="action-btn" onclick="analyzText()">‚ú® Analizar mi texto</button>
                    <button class="action-btn secondary" onclick="saveWork()">üíæ Guardar trabajo</button>
                    <button class="action-btn secondary" onclick="clearText()">üóëÔ∏è Limpiar</button>
                    <button class="action-btn secondary" onclick="backToGenres()">‚Üê Cambiar g√©nero</button>
                </div>
            </div>

            <div class="feedback-panel" id="feedbackPanel">
                <h2 class="feedback-title">üìä An√°lisis de tu escritura</h2>
                <div class="feedback-grid" id="feedbackGrid"></div>
                <div class="suggestions-box">
                    <div class="suggestions-title">üí° Sugerencias para mejorar</div>
                    <div id="suggestionsList"></div>
                </div>
            </div>
        </div>

        <div class="saved-works" id="savedWorks">
            <h2 class="saved-title">üìñ Mis trabajos guardados</h2>
            <div class="works-grid" id="worksGrid"></div>
        </div>
    </div>

    <script>
        const prompts = {
            cuento: [
                {
                    text: "Escribe un cuento sobre un objeto cotidiano que cobra vida de noche.",
                    words: ["m√°gico", "sorpresa", "aventura", "transformaci√≥n"]
                },
                {
                    text: "Cuenta la historia de un ni√±o que descubre un poder especial.",
                    words: ["valent√≠a", "descubrimiento", "amistad", "desaf√≠o"]
                },
                {
                    text: "Narra lo que sucedi√≥ cuando un animal salvaje lleg√≥ al vecindario.",
                    words: ["inesperado", "comunidad", "resolver", "comprensi√≥n"]
                }
            ],
            poesia: [
                {
                    text: "Escribe un poema sobre las estaciones del a√±o y sus cambios.",
                    words: ["colores", "sentimientos", "naturaleza", "tiempo"]
                },
                {
                    text: "Crea un poema inspirado en tus recuerdos favoritos.",
                    words: ["nostalgia", "alegr√≠a", "momentos", "coraz√≥n"]
                },
                {
                    text: "Escribe versos sobre un lugar especial para ti.",
                    words: ["paisaje", "emociones", "pertenencia", "paz"]
                }
            ],
            aventura: [
                {
                    text: "Describe una expedici√≥n a un lugar inexplorado y peligroso.",
                    words: ["peligro", "valent√≠a", "equipo", "tesoro"]
                },
                {
                    text: "Cuenta la historia de un viaje en el tiempo que sali√≥ mal.",
                    words: ["pasado", "futuro", "consecuencias", "acci√≥n"]
                },
                {
                    text: "Narra una b√∫squeda de algo perdido en una ciudad desconocida.",
                    words: ["misterio", "b√∫squeda", "extra√±o", "perseverancia"]
                }
            ],
            fantasia: [
                {
                    text: "Crea un mundo m√°gico con sus propias reglas y criaturas.",
                    words: ["magia", "criaturas", "reinos", "profec√≠a"]
                },
                {
                    text: "Escribe sobre un h√©roe que debe salvar su mundo de la oscuridad.",
                    words: ["destino", "batalla", "sacrificio", "esperanza"]
                },
                {
                    text: "Describe un encuentro con seres de otra dimensi√≥n.",
                    words: ["portal", "asombro", "diferente", "equilibrio"]
                }
            ],
            misterio: [
                {
                    text: "Resuelve el caso de algo que desapareci√≥ misteriosamente.",
                    words: ["pistas", "sospechoso", "investigar", "revelar"]
                },
                {
                    text: "Cuenta sobre mensajes secretos encontrados en lugares inesperados.",
                    words: ["c√≥digo", "secreto", "descifrar", "verdad"]
                },
                {
                    text: "Narra un suceso extra√±o que nadie puede explicar.",
                    words: ["inexplicable", "testigo", "teor√≠a", "resolver"]
                }
            ],
            descriptivo: [
                {
                    text: "Describe detalladamente tu lugar favorito usando los cinco sentidos.",
                    words: ["vista", "sonido", "textura", "aroma"]
                },
                {
                    text: "Pinta con palabras un amanecer o atardecer memorable.",
                    words: ["colores", "luz", "atm√≥sfera", "belleza"]
                },
                {
                    text: "Describe a una persona especial sin mencionar su apariencia f√≠sica.",
                    words: ["personalidad", "esencia", "car√°cter", "energ√≠a"]
                }
            ]
        };

        const tips = {
            cuento: [
                "Define un inicio, desarrollo y final claro",
                "Crea personajes con personalidades √∫nicas",
                "Usa di√°logos para dar vida a la historia",
                "Incluye un conflicto o problema a resolver"
            ],
            poesia: [
                "Juega con las palabras y su sonoridad",
                "Usa met√°foras y comparaciones creativas",
                "No te preocupes por la rima si no fluye naturalmente",
                "Expresa emociones y sensaciones"
            ],
            aventura: [
                "Mant√©n el ritmo con acci√≥n constante",
                "Crea obst√°culos y desaf√≠os emocionantes",
                "Describe los lugares de forma v√≠vida",
                "Construye tensi√≥n gradualmente"
            ],
            fantasia: [
                "Establece reglas claras para tu mundo m√°gico",
                "Crea criaturas y elementos √∫nicos",
                "Balancea lo m√°gico con lo emocional",
                "Construye un universo coherente"
            ],
            misterio: [
                "Deja pistas sutiles a lo largo del texto",
                "Crea sospecha y tensi√≥n",
                "Sorprende con giros inesperados",
                "Resuelve el misterio de forma satisfactoria"
            ],
            descriptivo: [
                "Usa adjetivos precisos y evocadores",
                "Apela a todos los sentidos",
                "Muestra en lugar de solo decir",
                "Crea im√°genes mentales v√≠vidas"
            ]
        };

        let currentGenre = '';
        let currentPrompt = null;
        let savedTexts = [];

        function selectGenre(genre) {
            currentGenre = genre;
            
            document.querySelectorAll('.genre-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.genre-card').classList.add('selected');
            
            setTimeout(() => {
                document.getElementById('genreSelector').style.display = 'none';
                document.getElementById('writingArea').classList.add('show');
                loadPrompt();
                loadTips();
            }, 300);
        }

        function loadPrompt() {
            const genrePrompts = prompts[currentGenre];
            currentPrompt = genrePrompts[Math.floor(Math.random() * genrePrompts.length)];
            
            document.getElementById('promptText').textContent = currentPrompt.text;
            
            const wordsContainer = document.getElementById('promptWords');
            wordsContainer.innerHTML = '<strong style="color: white; margin-right: 10px;">Palabras sugeridas:</strong>';
            currentPrompt.words.forEach(word => {
                const chip = document.createElement('span');
                chip.className = 'word-chip';
                chip.textContent = word;
                wordsContainer.appendChild(chip);
            });
        }

        function loadTips() {
            const tipsList = document.getElementById('tipsList');
            tipsList.innerHTML = '';
            tips[currentGenre].forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                tipsList.appendChild(li);
            });
        }

        function refreshPrompt() {
            loadPrompt();
        }

        function updateCounters() {
            const text = document.getElementById('textInput').value;
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            const chars = text.length;
            
            document.getElementById('wordCount').textContent = words.length;
            document.getElementById('charCount').textContent = chars;
        }

        function analyzText() {
            const text = document.getElementById('textInput').value.trim();
            
            if (text.length < 50) {
                alert('Escribe al menos 50 caracteres para obtener un an√°lisis completo.');
                return;
            }
            
            const words = text.split(/\s+/).filter(word => word.length > 0);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const avgWordLength = words.reduce((sum, word) => sum + word.length, 0) / words.length;
            const avgSentenceLength = words.length / sentences.length;
            
            const wordsUsed = currentPrompt.words.filter(word => 
                text.toLowerCase().includes(word.toLowerCase())
            );
            
            const feedbackGrid = document.getElementById('feedbackGrid');
            feedbackGrid.innerHTML = `
                <div class="feedback-card">
                    <div class="feedback-card-title">üìù Extensi√≥n</div>
                    <div class="feedback-card-content">
                        ${words.length} palabras en ${sentences.length} oraciones
                    </div>
                </div>
                <div class="feedback-card">
                    <div class="feedback-card-title">üìè Promedio</div>
                    <div class="feedback-card-content">
                        ${avgSentenceLength.toFixed(1)} palabras por oraci√≥n
                    </div>
                </div>
                <div class="feedback-card">
                    <div class="feedback-card-title">‚ú® Creatividad</div>
                    <div class="feedback-card-content">
                        Usaste ${wordsUsed.length} de ${currentPrompt.words.length} palabras sugeridas
                    </div>
                </div>
                <div class="feedback-card">
                    <div class="feedback-card-title">üéØ Legibilidad</div>
                    <div class="feedback-card-content">
                        ${avgWordLength.toFixed(1)} caracteres por palabra
                    </div>
                </div>
            `;
            
            const suggestions = [];
            
            if (words.length < 100) {
                suggestions.push('Intenta desarrollar m√°s tu idea. Un buen texto tiene al menos 100 palabras.');
            }
            if (avgSentenceLength > 20) {
                suggestions.push('Tus oraciones son largas. Intenta dividirlas para mejorar la claridad.');
            }
            if (wordsUsed.length < 2) {
                suggestions.push('Incorpora m√°s palabras sugeridas para enriquecer tu texto.');
            }
            if (sentences.length < 5) {
                suggestions.push('Desarrolla m√°s p√°rrafos para estructurar mejor tu texto.');
            }
            
            if (suggestions.length === 0) {
                suggestions.push('¬°Excelente trabajo! Tu texto est√° bien estructurado.');
                suggestions.push('Contin√∫a practicando y experimentando con diferentes estilos.');
            }
            
            const suggestionsList = document.getElementById('suggestionsList');
            suggestionsList.innerHTML = '';
            suggestions.forEach(suggestion => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                div.textContent = suggestion;
                suggestionsList.appendChild(div);
            });
            
            document.getElementById('feedbackPanel').classList.add('show');
            document.getElementById('feedbackPanel').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function saveWork() {
            const text = document.getElementById('textInput').value.trim();
            
            if (text.length < 50) {
                alert('Escribe al menos 50 caracteres antes de guardar.');
                return;
            }
            
            const work = {
                genre: currentGenre,
                text: text,
                date: new Date().toLocaleDateString('es-ES'),
                words: text.split(/\s+/).filter(word => word.length > 0).length
            };
            
            savedTexts.push(work);
            
            alert('‚úÖ ¬°Tu trabajo ha sido guardado exitosamente!');
            displaySavedWorks();
            
            document.getElementById('savedWorks').scrollIntoView({ behavior: 'smooth' });
        }

        function displaySavedWorks() {
            const worksGrid = document.getElementById('worksGrid');
            
            if (savedTexts.length === 0) {
                worksGrid.innerHTML = '<p style="color: #889F92; text-align: center; grid-column: 1/-1;">A√∫n no tienes trabajos guardados. ¬°Empieza a escribir!</p>';
                return;
            }
            
            worksGrid.innerHTML = '';
            savedTexts.forEach((work, index) => {
                const card = document.createElement('div');
                card.className = 'work-card';
                card.onclick = () => loadWork(index);
                
                const genreNames = {
                    cuento: 'üìö Cuento',
                    poesia: 'üå∏ Poes√≠a',
                    aventura: 'üó∫Ô∏è Aventura',
                    fantasia: 'ü¶Ñ Fantas√≠a',
                    misterio: 'üîç Misterio',
                    descriptivo: 'üé® Descriptivo'
                };
                
                card.innerHTML = `
                    <div class="work-genre">${genreNames[work.genre]}</div>
                    <div class="work-preview">${work.text}</div>
                    <div class="work-meta">
                        <span>${work.words} palabras</span>
                        <span>${work.date}</span>
                    </div>
                `;
                
                worksGrid.appendChild(card);
            });
        }

        function loadWork(index) {
            const work = savedTexts[index];
            
            if (confirm('¬øQuieres cargar este trabajo en el editor? (Se perder√° el texto actual si no lo has guardado)')) {
                currentGenre = work.genre;
                document.getElementById('textInput').value = work.text;
                updateCounters();
                
                document.getElementById('genreSelector').style.display = 'none';
                document.getElementById('writingArea').classList.add('show');
                loadPrompt();
                loadTips();
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function clearText() {
            if (confirm('¬øEst√°s seguro de que quieres limpiar el texto?')) {
                document.getElementById('textInput').value = '';
                updateCounters();
                document.getElementById('feedbackPanel').classList.remove('show');
            }
        }

        function backToGenres() {
            const text = document.getElementById('textInput').value.trim();
            
            if (text.length > 0) {
                if (!confirm('¬øQuieres salir? Se perder√° tu texto actual si no lo has guardado.')) {
                    return;
                }
            }
            
            document.getElementById('writingArea').classList.remove('show');
            document.getElementById('genreSelector').style.display = 'block';
            document.getElementById('textInput').value = '';
            document.getElementById('feedbackPanel').classList.remove('show');
            updateCounters();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        displaySavedWorks();
    </script>
</body>
</html>