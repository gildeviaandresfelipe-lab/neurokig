<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viaje a la Edad Media</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FEF0F0 0%, #EDA2A1 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #E77B66, #EE9A5B);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }

        .score-item {
            background: rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .game-area {
            padding: 40px;
            background: #FEF0F0;
        }

        .topic-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .topic-btn {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        .topic-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .topic-btn.active {
            background: linear-gradient(135deg, #E15034, #E77B66);
        }

        .game-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            min-height: 400px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .visual-scene {
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #EDA2A1, #EE9A5B);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            min-height: 180px;
            position: relative;
            overflow: hidden;
        }

        .scene-icon {
            font-size: 7em;
            animation: float 3s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .info-box {
            background: #FEF0F0;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #EE9A5B;
            margin: 20px 0;
            line-height: 1.8;
            font-size: 1.2em;
        }

        .info-title {
            color: #E15034;
            font-weight: bold;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .question-box {
            font-size: 1.4em;
            color: #E15034;
            margin: 25px 0;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            background: #FEF0F0;
            border-radius: 15px;
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .option-btn {
            background: white;
            border: 3px solid #EDA2A1;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option-icon {
            font-size: 2.5em;
            min-width: 60px;
            text-align: center;
        }

        .option-btn:hover {
            background: #EDA2A1;
            color: white;
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: #889F92;
            color: white;
            border-color: #889F92;
            animation: pulse 0.5s;
        }

        .option-btn.incorrect {
            background: #E15034;
            color: white;
            border-color: #E15034;
            animation: shake 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .timeline {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #FEF0F0;
            border-radius: 10px;
            border-left: 5px solid #889F92;
        }

        .timeline-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-card {
            background: #FEF0F0;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .comparison-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .comparison-title {
            font-weight: bold;
            color: #E77B66;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .match-activity {
            margin: 20px 0;
        }

        .match-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .match-item {
            background: #FEF0F0;
            border: 3px solid #EDA2A1;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 1.1em;
        }

        .match-item:hover {
            background: #EE9A5B;
            color: white;
        }

        .match-item.selected {
            background: #889F92;
            color: white;
            border-color: #889F92;
        }

        .feedback {
            margin-top: 20px;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.3em;
            text-align: center;
            font-weight: bold;
        }

        .feedback.success {
            background: #889F92;
            color: white;
        }

        .feedback.error {
            background: #E15034;
            color: white;
        }

        .celebration {
            text-align: center;
            font-size: 3em;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .next-btn {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .highlight {
            background: #EE9A5B;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .medieval-fact {
            background: linear-gradient(135deg, #889F92, #7A8F82);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .fact-icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .character-card {
            background: white;
            border: 3px solid #EDA2A1;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .character-card:hover {
            transform: scale(1.05);
            border-color: #E77B66;
        }

        .character-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ° Viaje a la Edad Media âš”ï¸</h1>
            <div class="score-board">
                <div class="score-item">â­ Puntos: <span id="score">0</span></div>
                <div class="score-item">ğŸ† Nivel: <span id="level">1</span></div>
            </div>
        </div>

        <div class="game-area">
            <div class="topic-selector">
                <button class="topic-btn active" onclick="changeTopic('castillos')">ğŸ° Castillos</button>
                <button class="topic-btn" onclick="changeTopic('caballeros')">âš”ï¸ Caballeros</button>
                <button class="topic-btn" onclick="changeTopic('feudalismo')">ğŸ‘‘ Feudalismo</button>
                <button class="topic-btn" onclick="changeTopic('vida')">ğŸ˜ï¸ Vida Diaria</button>
                <button class="topic-btn" onclick="changeTopic('religion')">â›ª ReligiÃ³n</button>
                <button class="topic-btn" onclick="changeTopic('cultura')">ğŸ“œ Cultura</button>
            </div>

            <div class="game-content" id="gameContent"></div>
        </div>
    </div>

    <script>
        let score = 0;
        let level = 1;
        let currentTopic = 'castillos';
        let currentQuestion = 0;
        let selectedMatch = null;

        const topics = {
            castillos: [
                {
                    visual: 'ğŸ°',
                    info: 'Los castillos medievales eran grandes construcciones de piedra. ServÃ­an como <span class="highlight">fortalezas</span> para proteger a los seÃ±ores feudales y sus familias de los enemigos.',
                    question: 'Â¿Para quÃ© se construÃ­an los castillos?',
                    options: [
                        {icon: 'ğŸ›¡ï¸', text: 'Para protegerse de enemigos'},
                        {icon: 'ğŸª', text: 'Para vender productos'},
                        {icon: 'ğŸ«', text: 'Para estudiar matemÃ¡ticas'},
                        {icon: 'ğŸª', text: 'Para hacer circos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! Los castillos eran fortalezas para protecciÃ³n y defensa.'
                },
                {
                    visual: 'ğŸ°',
                    info: 'Las partes del castillo incluÃ­an: las <span class="highlight">murallas</span> altas, las <span class="highlight">torres</span> de vigilancia, el <span class="highlight">foso</span> con agua y el <span class="highlight">puente levadizo</span>.',
                    question: 'Â¿QuÃ© rodeaba al castillo para protegerlo?',
                    options: [
                        {icon: 'ğŸŒŠ', text: 'Un foso con agua'},
                        {icon: 'ğŸŒ³', text: 'Ãrboles grandes'},
                        {icon: 'ğŸ–ï¸', text: 'Una playa'},
                        {icon: 'ğŸŒ¸', text: 'Jardines de flores'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! El foso con agua dificultaba el acceso de enemigos.'
                },
                {
                    visual: 'ğŸ—¼',
                    info: 'Las torres del castillo eran muy importantes. Desde allÃ­, los guardias vigilaban y podÃ­an ver si se acercaban enemigos desde lejos.',
                    question: 'Â¿QuÃ© hacÃ­an los guardias en las torres?',
                    options: [
                        {icon: 'ğŸ‘€', text: 'Vigilar y observar'},
                        {icon: 'ğŸ˜´', text: 'Dormir todo el dÃ­a'},
                        {icon: 'ğŸ½ï¸', text: 'Cocinar comida'},
                        {icon: 'ğŸ¨', text: 'Pintar cuadros'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los guardias vigilaban desde las torres para detectar peligros.'
                },
                {
                    type: 'match',
                    visual: 'ğŸ°',
                    question: 'Une cada parte del castillo con su funciÃ³n:',
                    pairs: [
                        {item: 'ğŸ—¼ Torre', match: 'Vigilar'},
                        {item: 'ğŸŒŠ Foso', match: 'Proteger'},
                        {item: 'ğŸšª Puente', match: 'Entrar'},
                        {item: 'ğŸ§± Muralla', match: 'Defender'}
                    ],
                    explanation: 'Â¡Muy bien! Conoces las partes del castillo.'
                },
                {
                    visual: 'ğŸ°',
                    info: 'Dentro del castillo habÃ­a muchas habitaciones. El <span class="highlight">salÃ³n principal</span> era donde el seÃ±or recibÃ­a visitas y hacÃ­a grandes banquetes.',
                    question: 'Â¿QuÃ© se hacÃ­a en el salÃ³n principal?',
                    options: [
                        {icon: 'ğŸ–', text: 'Banquetes y reuniones'},
                        {icon: 'ğŸ›ï¸', text: 'Dormir toda la noche'},
                        {icon: 'ğŸ´', text: 'Guardar caballos'},
                        {icon: 'ğŸ’§', text: 'Almacenar agua'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! El salÃ³n era para recepciones y grandes comidas.'
                },
                {
                    visual: 'ğŸ—ï¸',
                    info: 'Construir un castillo tomaba muchos aÃ±os. Cientos de trabajadores usaban piedras pesadas y trabajaban duro cada dÃ­a.',
                    question: 'Â¿CuÃ¡nto tiempo tomaba construir un castillo?',
                    options: [
                        {icon: 'ğŸ“…', text: 'Muchos aÃ±os'},
                        {icon: 'â°', text: 'Unas horas'},
                        {icon: 'ğŸ“†', text: 'Una semana'},
                        {icon: 'ğŸŒ™', text: 'Una noche'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! Los castillos tardaban aÃ±os en construirse.'
                }
            ],
            caballeros: [
                {
                    visual: 'âš”ï¸',
                    info: 'Los caballeros eran guerreros nobles que servÃ­an a un seÃ±or feudal. DebÃ­an ser <span class="highlight">valientes, leales y honorables</span>.',
                    question: 'Â¿QuÃ© cualidades debÃ­a tener un caballero?',
                    options: [
                        {icon: 'ğŸ’ª', text: 'ValentÃ­a y honor'},
                        {icon: 'ğŸ˜´', text: 'Pereza y miedo'},
                        {icon: 'ğŸ˜ˆ', text: 'Maldad y egoÃ­smo'},
                        {icon: 'ğŸ¤¥', text: 'Mentira y traiciÃ³n'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los caballeros seguÃ­an un cÃ³digo de honor.'
                },
                {
                    visual: 'ğŸ›¡ï¸',
                    info: 'La armadura protegÃ­a al caballero en batalla. Estaba hecha de metal y pesaba mucho. TambiÃ©n usaban un <span class="highlight">casco</span> y un <span class="highlight">escudo</span>.',
                    question: 'Â¿Para quÃ© usaban armadura los caballeros?',
                    options: [
                        {icon: 'ğŸ›¡ï¸', text: 'Para protegerse en batalla'},
                        {icon: 'ğŸ‘”', text: 'Para verse elegantes'},
                        {icon: 'ğŸƒ', text: 'Para correr mÃ¡s rÃ¡pido'},
                        {icon: 'ğŸ­', text: 'Para actuar en teatro'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! La armadura los protegÃ­a de las armas enemigas.'
                },
                {
                    visual: 'ğŸ´',
                    info: 'Los caballeros montaban caballos entrenados para la batalla. El caballo era su compaÃ±ero mÃ¡s importante y lo cuidaban mucho.',
                    question: 'Â¿Por quÃ© era importante el caballo?',
                    options: [
                        {icon: 'âš”ï¸', text: 'Para batallar y viajar'},
                        {icon: 'ğŸ ', text: 'Para jugar en carruseles'},
                        {icon: 'ğŸª', text: 'Para hacer trucos de circo'},
                        {icon: 'ğŸª', text: 'Para venderlo en el mercado'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! El caballo era esencial para el caballero.'
                },
                {
                    visual: 'ğŸ–ï¸',
                    info: 'Para convertirse en caballero, un joven debÃ­a entrenar desde niÃ±o. Primero era <span class="highlight">paje</span>, luego <span class="highlight">escudero</span>, y finalmente caballero.',
                    question: 'Â¿CÃ³mo empezaba el entrenamiento de un caballero?',
                    options: [
                        {icon: 'ğŸ‘¦', text: 'Como paje desde niÃ±o'},
                        {icon: 'ğŸ‘´', text: 'Como anciano sabio'},
                        {icon: 'ğŸ‘¶', text: 'Como bebÃ©'},
                        {icon: 'ğŸ“', text: 'En la universidad'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! Los niÃ±os empezaban como pajes muy jÃ³venes.'
                },
                {
                    visual: 'ğŸ†',
                    info: 'Los torneos eran competencias donde los caballeros mostraban sus habilidades. Luchaban con lanzas mientras montaban caballos.',
                    question: 'Â¿QuÃ© eran los torneos medievales?',
                    options: [
                        {icon: 'ğŸ¯', text: 'Competencias de caballeros'},
                        {icon: 'ğŸª', text: 'EspectÃ¡culos de payasos'},
                        {icon: 'ğŸ«', text: 'Clases de matemÃ¡ticas'},
                        {icon: 'ğŸ´', text: 'Concursos de cocina'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los torneos eran competencias de habilidad y valor.'
                },
                {
                    visual: 'ğŸ—¡ï¸',
                    info: 'Las armas principales del caballero eran la <span class="highlight">espada</span>, la <span class="highlight">lanza</span> y el <span class="highlight">hacha</span>. DebÃ­an entrenar mucho para usarlas bien.',
                    question: 'Â¿QuÃ© arma era sÃ­mbolo del caballero?',
                    options: [
                        {icon: 'âš”ï¸', text: 'La espada'},
                        {icon: 'ğŸ”«', text: 'La pistola'},
                        {icon: 'ğŸ¹', text: 'El arco y flecha'},
                        {icon: 'ğŸ”¨', text: 'El martillo'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! La espada era el arma noble del caballero.'
                }
            ],
            feudalismo: [
                {
                    visual: 'ğŸ‘‘',
                    info: 'En el sistema feudal, el <span class="highlight">rey</span> estaba en la cima. Daba tierras a los nobles a cambio de lealtad y servicio militar.',
                    question: 'Â¿QuiÃ©n estaba en la cima del sistema feudal?',
                    options: [
                        {icon: 'ğŸ‘‘', text: 'El rey'},
                        {icon: 'ğŸ‘¨â€ğŸŒ¾', text: 'El campesino'},
                        {icon: 'ğŸ§™', text: 'El mago'},
                        {icon: 'ğŸ¤¡', text: 'El bufÃ³n'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! El rey era la mÃ¡xima autoridad.'
                },
                {
                    visual: 'ğŸ›ï¸',
                    info: 'Los <span class="highlight">seÃ±ores feudales</span> eran nobles que recibÃ­an tierras del rey. A cambio, protegÃ­an esas tierras y servÃ­an al rey en las guerras.',
                    question: 'Â¿QuÃ© recibÃ­an los seÃ±ores feudales del rey?',
                    options: [
                        {icon: 'ğŸ—ºï¸', text: 'Tierras para gobernar'},
                        {icon: 'ğŸ’°', text: 'Solo dinero'},
                        {icon: 'ğŸ–', text: 'Comida gratis'},
                        {icon: 'ğŸ', text: 'Regalos de cumpleaÃ±os'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! RecibÃ­an tierras llamadas feudos.'
                },
                {
                    visual: 'ğŸ‘¨â€ğŸŒ¾',
                    info: 'Los <span class="highlight">siervos</span> trabajaban la tierra del seÃ±or. No eran libres y debÃ­an entregar parte de su cosecha al seÃ±or feudal.',
                    question: 'Â¿QuiÃ©nes trabajaban la tierra?',
                    options: [
                        {icon: 'ğŸ‘¨â€ğŸŒ¾', text: 'Los siervos'},
                        {icon: 'ğŸ‘‘', text: 'Los reyes'},
                        {icon: 'âš”ï¸', text: 'Los caballeros'},
                        {icon: 'â›ª', text: 'Los sacerdotes'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los siervos cultivaban la tierra.'
                },
                {
                    type: 'hierarchy',
                    visual: 'ğŸ“Š',
                    question: 'Ordena la sociedad feudal de arriba a abajo:',
                    info: 'La sociedad medieval estaba organizada en niveles. Cada persona tenÃ­a su lugar y deberes especÃ­ficos.',
                    items: [
                        {icon: 'ğŸ‘‘', text: 'Rey', order: 1},
                        {icon: 'ğŸ›ï¸', text: 'Nobles', order: 2},
                        {icon: 'âš”ï¸', text: 'Caballeros', order: 3},
                        {icon: 'ğŸ‘¨â€ğŸŒ¾', text: 'Siervos', order: 4}
                    ],
                    explanation: 'Â¡Excelente! Has ordenado correctamente la jerarquÃ­a feudal.'
                },
                {
                    visual: 'ğŸ¤',
                    info: 'El <span class="highlight">vasallaje</span> era un juramento de lealtad. Un vasallo prometÃ­a servir a su seÃ±or, y el seÃ±or prometÃ­a protegerlo.',
                    question: 'Â¿QuÃ© era el vasallaje?',
                    options: [
                        {icon: 'ğŸ¤', text: 'Un juramento de lealtad'},
                        {icon: 'ğŸ‰', text: 'Una fiesta grande'},
                        {icon: 'âš”ï¸', text: 'Una batalla'},
                        {icon: 'ğŸ“š', text: 'Un libro antiguo'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! El vasallaje era un compromiso de lealtad mutua.'
                },
                {
                    visual: 'ğŸŒ¾',
                    info: 'El <span class="highlight">feudo</span> era la tierra que el seÃ±or daba a su vasallo. IncluÃ­a campos, bosques, aldeas y todo lo que habÃ­a allÃ­.',
                    question: 'Â¿QuÃ© era un feudo?',
                    options: [
                        {icon: 'ğŸ—ºï¸', text: 'Tierra dada por el seÃ±or'},
                        {icon: 'ğŸ’°', text: 'Una bolsa de monedas'},
                        {icon: 'âš”ï¸', text: 'Un tipo de espada'},
                        {icon: 'ğŸª', text: 'Un circo ambulante'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! El feudo era la base del sistema feudal.'
                }
            ],
            vida: [
                {
                    visual: 'ğŸ˜ï¸',
                    info: 'La mayorÃ­a de la gente vivÃ­a en <span class="highlight">aldeas</span> pequeÃ±as. Las casas eran sencillas, hechas de madera y paja.',
                    question: 'Â¿DÃ³nde vivÃ­a la mayorÃ­a de la gente?',
                    options: [
                        {icon: 'ğŸ˜ï¸', text: 'En aldeas pequeÃ±as'},
                        {icon: 'ğŸ°', text: 'En castillos grandes'},
                        {icon: 'ğŸ™ï¸', text: 'En ciudades modernas'},
                        {icon: 'ğŸ–ï¸', text: 'En la playa'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! La gente comÃºn vivÃ­a en aldeas rurales.'
                },
                {
                    visual: 'ğŸ',
                    info: 'La comida principal era <span class="highlight">pan</span>, vegetales y potaje (sopa espesa). La carne era un lujo que solo los ricos comÃ­an frecuentemente.',
                    question: 'Â¿CuÃ¡l era el alimento mÃ¡s comÃºn?',
                    options: [
                        {icon: 'ğŸ', text: 'El pan'},
                        {icon: 'ğŸ•', text: 'La pizza'},
                        {icon: 'ğŸ”', text: 'Las hamburguesas'},
                        {icon: 'ğŸ°', text: 'Los pasteles'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! El pan era el alimento bÃ¡sico medieval.'
                },
                {
                    visual: 'ğŸ‘¨â€ğŸŒ¾',
                    info: 'El trabajo en el campo era muy duro. La gente trabajaba desde el amanecer hasta el anochecer, cultivando y cosechando.',
                    question: 'Â¿CÃ³mo era el trabajo de los campesinos?',
                    options: [
                        {icon: 'ğŸ’ª', text: 'Muy duro y largo'},
                        {icon: 'ğŸ˜´', text: 'FÃ¡cil y corto'},
                        {icon: 'ğŸ®', text: 'Como jugar videojuegos'},
                        {icon: 'ğŸ–ï¸', text: 'Como unas vacaciones'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! Los campesinos trabajaban duramente todo el dÃ­a.'
                },
                {
                    visual: 'ğŸ­',
                    info: 'Para divertirse, la gente tenÃ­a <span class="highlight">ferias</span>, <span class="highlight">festivales</span> y actuaciones de juglares que cantaban y contaban historias.',
                    question: 'Â¿CÃ³mo se divertÃ­a la gente?',
                    options: [
                        {icon: 'ğŸª', text: 'Con ferias y festivales'},
                        {icon: 'ğŸ“±', text: 'Con telÃ©fonos mÃ³viles'},
                        {icon: 'ğŸ“º', text: 'Viendo televisiÃ³n'},
                        {icon: 'ğŸ®', text: 'Jugando videojuegos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! Las ferias eran momentos especiales de diversiÃ³n.'
                },
                {
                    visual: 'ğŸ‘—',
                    info: 'La ropa dependÃ­a de la clase social. Los nobles vestÃ­an <span class="highlight">telas finas</span> y colores brillantes. Los campesinos usaban ropa simple de lana.',
                    question: 'Â¿QuÃ© diferenciaba la ropa de nobles y campesinos?',
                    options: [
                        {icon: 'ğŸ‘”', text: 'La calidad y los colores'},
                        {icon: 'ğŸ‘•', text: 'Todos vestÃ­an igual'},
                        {icon: 'ğŸ½', text: 'Usaban uniformes deportivos'},
                        {icon: 'ğŸ¦º', text: 'Usaban chalecos modernos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! La ropa mostraba la posiciÃ³n social.'
                },
                {
                    visual: 'ğŸ•¯ï¸',
                    info: 'No habÃ­a electricidad. La gente usaba <span class="highlight">velas</span> y <span class="highlight">antorchas</span> para iluminarse de noche. Las casas eran oscuras y frÃ­as.',
                    question: 'Â¿CÃ³mo se iluminaban las casas de noche?',
                    options: [
                        {icon: 'ğŸ•¯ï¸', text: 'Con velas y antorchas'},
                        {icon: 'ğŸ’¡', text: 'Con bombillas elÃ©ctricas'},
                        {icon: 'ğŸ”¦', text: 'Con linternas modernas'},
                        {icon: 'ğŸ“±', text: 'Con celulares'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! Las velas eran la Ãºnica fuente de luz artificial.'
                }
            ],
            religion: [
                {
                    visual: 'â›ª',
                    info: 'La <span class="highlight">Iglesia CatÃ³lica</span> era muy poderosa en la Edad Media. InfluÃ­a en la vida de todas las personas, desde reyes hasta campesinos.',
                    question: 'Â¿QuÃ© instituciÃ³n era muy poderosa?',
                    options: [
                        {icon: 'â›ª', text: 'La Iglesia CatÃ³lica'},
                        {icon: 'ğŸª', text: 'Las tiendas'},
                        {icon: 'ğŸ«', text: 'Las escuelas modernas'},
                        {icon: 'ğŸ¦', text: 'Los bancos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! La Iglesia tenÃ­a gran poder e influencia.'
                },
                {
                    visual: 'ğŸ™',
                    info: 'La gente iba a <span class="highlight">misa</span> los domingos y en dÃ­as festivos religiosos. La religiÃ³n era parte central de la vida diaria.',
                    question: 'Â¿CuÃ¡ndo iban las personas a la iglesia?',
                    options: [
                        {icon: 'ğŸ“…', text: 'Los domingos y dÃ­as festivos'},
                        {icon: 'ğŸŒ™', text: 'Solo de noche'},
                        {icon: 'ğŸ„', text: 'Solo en Navidad'},
                        {icon: 'âŒ', text: 'Nunca iban'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! La misa dominical era obligatoria.'
                },
                {
                    visual: 'ğŸ‘´',
                    info: 'Los <span class="highlight">monjes</span> vivÃ­an en monasterios. Dedicaban su vida a la oraciÃ³n, el estudio y copiar libros a mano.',
                    question: 'Â¿QuÃ© hacÃ­an los monjes?',
                    options: [
                        {icon: 'ğŸ“–', text: 'Orar y copiar libros'},
                        {icon: 'âš”ï¸', text: 'Luchar en batallas'},
                        {icon: 'ğŸ‘¨â€ğŸŒ¾', text: 'Vender en el mercado'},
                        {icon: 'ğŸª', text: 'Hacer espectÃ¡culos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los monjes preservaban el conocimiento copiando libros.'
                },
                {
                    visual: 'â›ª',
                    info: 'Las <span class="highlight">catedrales</span> eran iglesias enormes y hermosas. Tomaban dÃ©cadas en construirse y tenÃ­an vitrales coloridos.',
                    question: 'Â¿QuÃ© eran las catedrales?',
                    options: [
                        {icon: 'â›ª', text: 'Iglesias grandes y hermosas'},
                        {icon: 'ğŸ°', text: 'Castillos militares'},
                        {icon: 'ğŸª', text: 'Mercados cubiertos'},
                        {icon: 'ğŸ«', text: 'Escuelas pÃºblicas'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! Las catedrales eran obras arquitectÃ³nicas impresionantes.'
                },
                {
                    visual: 'âœï¸',
                    info: 'Las <span class="highlight">Cruzadas</span> fueron expediciones militares religiosas. Los cristianos europeos intentaban recuperar Tierra Santa.',
                    question: 'Â¿QuÃ© eran las Cruzadas?',
                    options: [
                        {icon: 'âš”ï¸', text: 'Expediciones militares religiosas'},
                        {icon: 'ğŸª', text: 'Festivales musicales'},
                        {icon: 'ğŸ“š', text: 'Concursos de lectura'},
                        {icon: 'ğŸƒ', text: 'Carreras deportivas'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! Las Cruzadas mezclaban religiÃ³n y guerra.'
                },
                {
                    visual: 'ğŸ“¿',
                    info: 'Las <span class="highlight">peregrinaciones</span> eran viajes largos a lugares sagrados. La gente caminaba durante semanas para visitar santuarios importantes.',
                    question: 'Â¿QuÃ© era una peregrinaciÃ³n?',
                    options: [
                        {icon: 'ğŸš¶', text: 'Viaje a un lugar sagrado'},
                        {icon: 'ğŸ–ï¸', text: 'Vacaciones en la playa'},
                        {icon: 'ğŸª', text: 'Ir de compras'},
                        {icon: 'ğŸ¢', text: 'Visitar parques de diversiones'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! Las peregrinaciones eran viajes de fe.'
                }
            ],
            cultura: [
                {
                    visual: 'ğŸ“œ',
                    info: 'Los libros se copiaban <span class="highlight">a mano</span> porque no existÃ­a la imprenta. Un solo libro podÃ­a tomar meses en completarse.',
                    question: 'Â¿CÃ³mo se hacÃ­an los libros?',
                    options: [
                        {icon: 'âœï¸', text: 'Copiados a mano'},
                        {icon: 'ğŸ–¨ï¸', text: 'Con impresoras'},
                        {icon: 'ğŸ’»', text: 'En computadoras'},
                        {icon: 'ğŸ“±', text: 'En telÃ©fonos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Copiar libros era un trabajo largo y cuidadoso.'
                },
                {
                    visual: 'ğŸ­',
                    info: 'Los <span class="highlight">juglares</span> eran artistas ambulantes. Viajaban de pueblo en pueblo cantando, contando historias y haciendo acrobacias.',
                    question: 'Â¿QuiÃ©nes eran los juglares?',
                    options: [
                        {icon: 'ğŸª', text: 'Artistas ambulantes'},
                        {icon: 'âš”ï¸', text: 'Guerreros valientes'},
                        {icon: 'ğŸ‘¨â€ğŸŒ¾', text: 'Agricultores'},
                        {icon: 'ğŸ‘‘', text: 'Reyes poderosos'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! Los juglares entretenÃ­an a la gente.'
                },
                {
                    visual: 'ğŸ›ï¸',
                    info: 'Las <span class="highlight">universidades</span> comenzaron en la Edad Media. AllÃ­ se estudiaba teologÃ­a, medicina, derecho y filosofÃ­a.',
                    question: 'Â¿QuÃ© eran las universidades medievales?',
                    options: [
                        {icon: 'ğŸ“š', text: 'Lugares de estudio superior'},
                        {icon: 'ğŸª', text: 'Mercados grandes'},
                        {icon: 'ğŸ°', text: 'Castillos fortificados'},
                        {icon: 'â›ª', text: 'Iglesias pequeÃ±as'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Muy bien! Las primeras universidades nacieron en esta Ã©poca.'
                },
                {
                    visual: 'ğŸ¨',
                    info: 'El <span class="highlight">arte medieval</span> era principalmente religioso. Las pinturas mostraban escenas de la Biblia y santos.',
                    question: 'Â¿QuÃ© temas tenÃ­a el arte medieval?',
                    options: [
                        {icon: 'âœï¸', text: 'Temas religiosos'},
                        {icon: 'ğŸš—', text: 'Carros modernos'},
                        {icon: 'ğŸ™ï¸', text: 'Ciudades futuras'},
                        {icon: 'ğŸ‘½', text: 'Extraterrestres'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Correcto! La religiÃ³n inspiraba la mayorÃ­a del arte.'
                },
                {
                    visual: 'ğŸµ',
                    info: 'La mÃºsica medieval incluÃ­a <span class="highlight">cantos gregorianos</span> en las iglesias y canciones populares en las aldeas.',
                    question: 'Â¿DÃ³nde se cantaban los cantos gregorianos?',
                    options: [
                        {icon: 'â›ª', text: 'En las iglesias'},
                        {icon: 'ğŸ°', text: 'En los castillos'},
                        {icon: 'ğŸ–ï¸', text: 'En la playa'},
                        {icon: 'ğŸª', text: 'En el mercado'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Perfecto! Los cantos gregorianos eran mÃºsica religiosa.'
                },
                {
                    visual: 'ğŸ“–',
                    info: 'Las <span class="highlight">leyendas</span> del Rey Arturo y los Caballeros de la Mesa Redonda se hicieron famosas en esta Ã©poca.',
                    question: 'Â¿QuÃ© historias eran populares?',
                    options: [
                        {icon: 'âš”ï¸', text: 'Leyendas de caballeros'},
                        {icon: 'ğŸš€', text: 'Viajes espaciales'},
                        {icon: 'ğŸ¦–', text: 'Dinosaurios'},
                        {icon: 'ğŸ¤–', text: 'Robots'}
                    ],
                    correct: 0,
                    explanation: 'Â¡Excelente! Las leyendas de caballerÃ­a eran muy populares.'
                }
            ]
        };

        function changeTopic(topic) {
            currentTopic = topic;
            currentQuestion = 0;
            
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function loadQuestion() {
            const questions = topics[currentTopic];
            if (currentQuestion >= questions.length) {
                currentQuestion = 0;
            }
            
            const q = questions[currentQuestion];
            const content = document.getElementById('gameContent');
            
            if (q.type === 'match') {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="match-activity">
                        <div class="match-grid">
                            <div>
                                ${q.pairs.map((pair, i) => 
                                    `<div class="match-item" onclick="selectMatch(${i}, 'item')" id="item${i}">${pair.item}</div>`
                                ).join('')}
                            </div>
                            <div>
                                ${q.pairs.map((pair, i) => 
                                    `<div class="match-item" onclick="selectMatch(${i}, 'match')" id="match${i}">${pair.match}</div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
            } else if (q.type === 'hierarchy') {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="info-box">
                        ${q.info}
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="character-grid" id="characterGrid">
                        ${q.items.sort(() => Math.random() - 0.5).map((item, i) => 
                            `<div class="character-card" onclick="selectHierarchy(${item.order})" data-order="${item.order}">
                                <div class="character-icon">${item.icon}</div>
                                <div>${item.text}</div>
                            </div>`
                        ).join('')}
                    </div>
                    <div class="medieval-fact">
                        <span class="fact-icon">ğŸ’¡</span>
                        Toca las opciones en el orden correcto: de arriba hacia abajo en la pirÃ¡mide social.
                    </div>
                `;
                window.hierarchySelected = [];
            } else {
                content.innerHTML = `
                    <div class="visual-scene">
                        <div class="scene-icon">${q.visual}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-title">ğŸ“š Aprende sobre la Edad Media:</div>
                        ${q.info}
                    </div>
                    <div class="question-box">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, i) => 
                            `<button class="option-btn" onclick="checkAnswer(${i})">
                                <span class="option-icon">${opt.icon}</span>
                                <span>${opt.text}</span>
                            </button>`
                        ).join('')}
                    </div>
                `;
            }
        }

        let matchedPairs = [];
        let firstSelection = null;

        function selectMatch(index, type) {
            if (firstSelection === null) {
                firstSelection = {index, type};
                document.getElementById(type + index).classList.add('selected');
            } else {
                if (firstSelection.type !== type && firstSelection.index === index) {
                    matchedPairs.push(index);
                    document.getElementById(firstSelection.type + firstSelection.index).style.opacity = '0.3';
                    document.getElementById(type + index).style.opacity = '0.3';
                    
                    const q = topics[currentTopic][currentQuestion];
                    if (matchedPairs.length === q.pairs.length) {
                        setTimeout(() => {
                            showFeedback(true, q.explanation);
                            updateScore(20);
                        }, 500);
                    }
                } else {
                    document.getElementById(firstSelection.type + firstSelection.index).classList.remove('selected');
                }
                firstSelection = null;
            }
        }

        window.hierarchySelected = [];

        function selectHierarchy(order) {
            window.hierarchySelected.push(order);
            event.target.style.opacity = '0.3';
            event.target.style.pointerEvents = 'none';
            
            const q = topics[currentTopic][currentQuestion];
            if (window.hierarchySelected.length === q.items.length) {
                const isCorrect = window.hierarchySelected.every((val, i) => val === i + 1);
                showFeedback(isCorrect, q.explanation);
                if (isCorrect) updateScore(20);
            }
        }

        function checkAnswer(selected) {
            const q = topics[currentTopic][currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (selected === q.correct) {
                buttons[selected].classList.add('correct');
                showFeedback(true, q.explanation);
                updateScore(15);
            } else {
                buttons[selected].classList.add('incorrect');
                buttons[q.correct].classList.add('correct');
                showFeedback(false, q.explanation);
            }
        }

        function showFeedback(isCorrect, message) {
            const content = document.getElementById('gameContent');
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback ${isCorrect ? 'success' : 'error'}`;
            feedbackDiv.innerHTML = `
                ${isCorrect ? '<div class="celebration">ğŸ‰ ğŸ° âš”ï¸</div>' : 'ğŸ’ª'}
                <p>${message}</p>
                <button class="next-btn" onclick="nextQuestion()">Siguiente Tema â†’</button>
            `;
            content.appendChild(feedbackDiv);
        }

        function nextQuestion() {
            currentQuestion++;
            matchedPairs = [];
            firstSelection = null;
            loadQuestion();
        }

        function updateScore(points) {
            score += points;
            document.getElementById('score').textContent = score;
            
            if (score >= level * 60) {
                level++;
                document.getElementById('level').textContent = level;
            }
        }

        loadQuestion();
    </script>
</body>
</html>